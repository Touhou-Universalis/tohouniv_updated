th_global_setup_danmaku_duels_data = {
	1 = {
		if = {
			limit = { NOT = { has_global_flag = th_setup_danmaku_duels_counter } }
			set_global_flag = th_setup_danmaku_duels_counter
			set_variable = {
				which = th_danmaku_duel_counter
				value = 0
			}
			set_variable = {
				which = th_danmaku_max_duels
				value = 31	#There can be only 30 simultaneous Danmaku Duels at any given point at time
			}
		}
	}
}

th_change_danmaku_instance_round = {
	if = { limit = { th_get_danmaku_duel_instance = { instance = 1 } } th_change_danmaku_specific_instance_round = { instance = 1 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 2 } } th_change_danmaku_specific_instance_round = { instance = 2 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 3 } } th_change_danmaku_specific_instance_round = { instance = 3 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 4 } } th_change_danmaku_specific_instance_round = { instance = 4 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 5 } } th_change_danmaku_specific_instance_round = { instance = 5 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 6 } } th_change_danmaku_specific_instance_round = { instance = 6 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 7 } } th_change_danmaku_specific_instance_round = { instance = 7 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 8 } } th_change_danmaku_specific_instance_round = { instance = 8 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 9 } } th_change_danmaku_specific_instance_round = { instance = 9 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 10 } } th_change_danmaku_specific_instance_round = { instance = 10 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 11 } } th_change_danmaku_specific_instance_round = { instance = 11 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 12 } } th_change_danmaku_specific_instance_round = { instance = 12 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 13 } } th_change_danmaku_specific_instance_round = { instance = 13 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 14 } } th_change_danmaku_specific_instance_round = { instance = 14 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 15 } } th_change_danmaku_specific_instance_round = { instance = 15 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 16 } } th_change_danmaku_specific_instance_round = { instance = 16 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 17 } } th_change_danmaku_specific_instance_round = { instance = 17 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 18 } } th_change_danmaku_specific_instance_round = { instance = 18 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 19 } } th_change_danmaku_specific_instance_round = { instance = 19 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 20 } } th_change_danmaku_specific_instance_round = { instance = 20 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 21 } } th_change_danmaku_specific_instance_round = { instance = 21 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 22 } } th_change_danmaku_specific_instance_round = { instance = 22 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 23 } } th_change_danmaku_specific_instance_round = { instance = 23 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 24 } } th_change_danmaku_specific_instance_round = { instance = 24 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 25 } } th_change_danmaku_specific_instance_round = { instance = 25 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 26 } } th_change_danmaku_specific_instance_round = { instance = 26 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 27 } } th_change_danmaku_specific_instance_round = { instance = 27 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 28 } } th_change_danmaku_specific_instance_round = { instance = 28 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 29 } } th_change_danmaku_specific_instance_round = { instance = 29 opponent = $opponent$ } }
	if = { limit = { th_get_danmaku_duel_instance = { instance = 30 } } th_change_danmaku_specific_instance_round = { instance = 30 opponent = $opponent$ } }
}

th_select_enemy_event_target_and_do_effect = {
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 1 } } event_target:th_danmaku_duelist_of_id_1_of_instance_1 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 2 } } event_target:th_danmaku_duelist_of_id_1_of_instance_2 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 3 } } event_target:th_danmaku_duelist_of_id_1_of_instance_3 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 4 } } event_target:th_danmaku_duelist_of_id_1_of_instance_4 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 5 } } event_target:th_danmaku_duelist_of_id_1_of_instance_5 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 6 } } event_target:th_danmaku_duelist_of_id_1_of_instance_6 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 7 } } event_target:th_danmaku_duelist_of_id_1_of_instance_7 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 8 } } event_target:th_danmaku_duelist_of_id_1_of_instance_8 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 9 } } event_target:th_danmaku_duelist_of_id_1_of_instance_9 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 10 } } event_target:th_danmaku_duelist_of_id_1_of_instance_10 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 11 } } event_target:th_danmaku_duelist_of_id_1_of_instance_11 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 12 } } event_target:th_danmaku_duelist_of_id_1_of_instance_12 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 13 } } event_target:th_danmaku_duelist_of_id_1_of_instance_13 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 14 } } event_target:th_danmaku_duelist_of_id_1_of_instance_14 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 15 } } event_target:th_danmaku_duelist_of_id_1_of_instance_15 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 16 } } event_target:th_danmaku_duelist_of_id_1_of_instance_16 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 17 } } event_target:th_danmaku_duelist_of_id_1_of_instance_17 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 18 } } event_target:th_danmaku_duelist_of_id_1_of_instance_18 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 19 } } event_target:th_danmaku_duelist_of_id_1_of_instance_19 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 20 } } event_target:th_danmaku_duelist_of_id_1_of_instance_20 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 21 } } event_target:th_danmaku_duelist_of_id_1_of_instance_21 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 22 } } event_target:th_danmaku_duelist_of_id_1_of_instance_22 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 23 } } event_target:th_danmaku_duelist_of_id_1_of_instance_23 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 24 } } event_target:th_danmaku_duelist_of_id_1_of_instance_24 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 25 } } event_target:th_danmaku_duelist_of_id_1_of_instance_25 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 26 } } event_target:th_danmaku_duelist_of_id_1_of_instance_26 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 27 } } event_target:th_danmaku_duelist_of_id_1_of_instance_27 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 28 } } event_target:th_danmaku_duelist_of_id_1_of_instance_28 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 29 } } event_target:th_danmaku_duelist_of_id_1_of_instance_29 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 1 instance = 30 } } event_target:th_danmaku_duelist_of_id_1_of_instance_30 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 1 } } event_target:th_danmaku_duelist_of_id_2_of_instance_1 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 2 } } event_target:th_danmaku_duelist_of_id_2_of_instance_2 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 3 } } event_target:th_danmaku_duelist_of_id_2_of_instance_3 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 4 } } event_target:th_danmaku_duelist_of_id_2_of_instance_4 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 5 } } event_target:th_danmaku_duelist_of_id_2_of_instance_5 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 6 } } event_target:th_danmaku_duelist_of_id_2_of_instance_6 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 7 } } event_target:th_danmaku_duelist_of_id_2_of_instance_7 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 8 } } event_target:th_danmaku_duelist_of_id_2_of_instance_8 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 9 } } event_target:th_danmaku_duelist_of_id_2_of_instance_9 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 10 } } event_target:th_danmaku_duelist_of_id_2_of_instance_10 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 11 } } event_target:th_danmaku_duelist_of_id_2_of_instance_11 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 12 } } event_target:th_danmaku_duelist_of_id_2_of_instance_12 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 13 } } event_target:th_danmaku_duelist_of_id_2_of_instance_13 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 14 } } event_target:th_danmaku_duelist_of_id_2_of_instance_14 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 15 } } event_target:th_danmaku_duelist_of_id_2_of_instance_15 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 16 } } event_target:th_danmaku_duelist_of_id_2_of_instance_16 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 17 } } event_target:th_danmaku_duelist_of_id_2_of_instance_17 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 18 } } event_target:th_danmaku_duelist_of_id_2_of_instance_18 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 19 } } event_target:th_danmaku_duelist_of_id_2_of_instance_19 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 20 } } event_target:th_danmaku_duelist_of_id_2_of_instance_20 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 21 } } event_target:th_danmaku_duelist_of_id_2_of_instance_21 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 22 } } event_target:th_danmaku_duelist_of_id_2_of_instance_22 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 23 } } event_target:th_danmaku_duelist_of_id_2_of_instance_23 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 24 } } event_target:th_danmaku_duelist_of_id_2_of_instance_24 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 25 } } event_target:th_danmaku_duelist_of_id_2_of_instance_25 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 26 } } event_target:th_danmaku_duelist_of_id_2_of_instance_26 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 27 } } event_target:th_danmaku_duelist_of_id_2_of_instance_27 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 28 } } event_target:th_danmaku_duelist_of_id_2_of_instance_28 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 29 } } event_target:th_danmaku_duelist_of_id_2_of_instance_29 = { $effect$ } }
	if = { limit = { th_is_not_danmaku_duel_enemy_target = { country_id = 2 instance = 30 } } event_target:th_danmaku_duelist_of_id_2_of_instance_30 = { $effect$ } }
}

th_danmaku_duel_on_annexed_effect = {
	th_clear_invalid_combat_instance = { instance = 1 }
	th_clear_invalid_combat_instance = { instance = 2 }
	th_clear_invalid_combat_instance = { instance = 3 }
	th_clear_invalid_combat_instance = { instance = 4 }
	th_clear_invalid_combat_instance = { instance = 5 }
	th_clear_invalid_combat_instance = { instance = 6 }
	th_clear_invalid_combat_instance = { instance = 7 }
	th_clear_invalid_combat_instance = { instance = 8 }
	th_clear_invalid_combat_instance = { instance = 9 }
	th_clear_invalid_combat_instance = { instance = 10 }
	th_clear_invalid_combat_instance = { instance = 11 }
	th_clear_invalid_combat_instance = { instance = 12 }
	th_clear_invalid_combat_instance = { instance = 13 }
	th_clear_invalid_combat_instance = { instance = 14 }
	th_clear_invalid_combat_instance = { instance = 15 }
	th_clear_invalid_combat_instance = { instance = 16 }
	th_clear_invalid_combat_instance = { instance = 17 }
	th_clear_invalid_combat_instance = { instance = 18 }
	th_clear_invalid_combat_instance = { instance = 19 }
	th_clear_invalid_combat_instance = { instance = 20 }
	th_clear_invalid_combat_instance = { instance = 21 }
	th_clear_invalid_combat_instance = { instance = 22 }
	th_clear_invalid_combat_instance = { instance = 23 }
	th_clear_invalid_combat_instance = { instance = 24 }
	th_clear_invalid_combat_instance = { instance = 25 }
	th_clear_invalid_combat_instance = { instance = 26 }
	th_clear_invalid_combat_instance = { instance = 27 }
	th_clear_invalid_combat_instance = { instance = 28 }
	th_clear_invalid_combat_instance = { instance = 29 }
	th_clear_invalid_combat_instance = { instance = 30 }
}

th_monthly_danmaku_duel_update = {
	if = {
		limit = { has_global_flag = th_setup_danmaku_duels_counter }
		th_monthly_danmaku_duel_duration_reduction = { instance = 1 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 2 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 3 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 4 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 5 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 6 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 7 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 8 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 9 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 10 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 11 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 12 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 13 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 14 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 15 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 16 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 17 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 18 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 19 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 20 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 21 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 22 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 23 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 24 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 25 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 26 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 27 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 28 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 29 }
		th_monthly_danmaku_duel_duration_reduction = { instance = 30 }
	}
}

th_log_cleanup_action = {
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_enemy_ac					value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_attack_die				 	value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_attack_die_amount			value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_attack_die_result			value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_attack_die_bonus_per_roll	value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_attack_die_flat_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_resistance_reduction		value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_type_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_critical_damage_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_damage_type_multiplicator	value = 0 }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$action$_damage_school_multiplicator	value = 0 }
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_actor_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_actor_1
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_actor_2
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_recipient_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_recipient_1
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_recipient_2
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_uses
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_performs
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_casts
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_enchants
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_curses
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_strikes
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_shoots
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_attacks
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_article_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_article_undefined
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_article_defined
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_attack
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_preposition_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_preposition_against
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_preposition_on
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_miss
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_dealing
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_healing
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_restore
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_afflicting_condition
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_gaining_condition
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_number_impact_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_number_impact_yes
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_damage_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_damage_yes
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_health_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_health_yes
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_mana_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_mana_yes
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_action_points_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_action_points_yes
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_critical_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_critical_yes
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_miss_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_miss_yes
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_roll_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_roll_yes
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_roll_NULL
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_roll_yes
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_type_physical
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_type_magical
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_type_psionic
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_bludgeoning
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_piercing
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_slashing
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_fire
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_frost
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_earth
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_lightning
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_nature
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_holy
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_shadow
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_necrotic
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_arcane
	clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_infernal
}

th_log_cleanup_action_solo = {
	set_variable = { which = th_danmaku_duel_action_$action$_value 							value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_hit_die_amount					value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_hit_die_result					value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_hit_die_flat_bonus				value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_hit_die_bonus_per_roll			value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_attack_die				 		value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_attack_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_attack_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_attack_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_attack_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_type_resistance_reduction		value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_critical_damage_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_damage_type_multiplicator		value = 0 }
	set_variable = { which = th_danmaku_duel_action_$action$_damage_school_multiplicator	value = 0 }
	clr_country_flag = th_danmaku_duel_action_$action$_actor_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_actor_1
	clr_country_flag = th_danmaku_duel_action_$action$_actor_2
	clr_country_flag = th_danmaku_duel_action_$action$_recipient_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_recipient_1
	clr_country_flag = th_danmaku_duel_action_$action$_recipient_2
	clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_uses
	clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_performs
	clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_casts
	clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_enchants
	clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_curses
	clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_strikes
	clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_shoots
	clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_attacks
	clr_country_flag = th_danmaku_duel_action_$action$_ability_article_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_ability_article_undefined
	clr_country_flag = th_danmaku_duel_action_$action$_ability_article_defined
	clr_country_flag = th_danmaku_duel_action_$action$_ability_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_ability_attack
	clr_country_flag = th_danmaku_duel_action_$action$_preposition_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_preposition_against
	clr_country_flag = th_danmaku_duel_action_$action$_preposition_on
	clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_miss
	clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_dealing
	clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_healing
	clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_restore
	clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_afflicting_condition
	clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_gaining_condition
	clr_country_flag = th_danmaku_duel_action_$action$_number_impact_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_number_impact_yes
	clr_country_flag = th_danmaku_duel_action_$action$_is_damage_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_is_damage_yes
	clr_country_flag = th_danmaku_duel_action_$action$_is_health_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_is_health_yes
	clr_country_flag = th_danmaku_duel_action_$action$_is_mana_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_is_mana_yes
	clr_country_flag = th_danmaku_duel_action_$action$_is_action_points_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_is_action_points_yes
	clr_country_flag = th_danmaku_duel_action_$action$_is_critical_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_is_critical_yes
	clr_country_flag = th_danmaku_duel_action_$action$_is_miss_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_is_miss_yes
	clr_country_flag = th_danmaku_duel_action_$action$_hit_roll_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_hit_roll_yes
	clr_country_flag = th_danmaku_duel_action_$action$_ability_roll_NULL
	clr_country_flag = th_danmaku_duel_action_$action$_ability_roll_yes
	clr_country_flag = th_danmaku_duel_action_$action$_type_physical
	clr_country_flag = th_danmaku_duel_action_$action$_type_magical
	clr_country_flag = th_danmaku_duel_action_$action$_type_psionic
	clr_country_flag = th_danmaku_duel_action_$action$_school_bludgeoning
	clr_country_flag = th_danmaku_duel_action_$action$_school_piercing
	clr_country_flag = th_danmaku_duel_action_$action$_school_slashing
	clr_country_flag = th_danmaku_duel_action_$action$_school_fire
	clr_country_flag = th_danmaku_duel_action_$action$_school_frost
	clr_country_flag = th_danmaku_duel_action_$action$_school_earth
	clr_country_flag = th_danmaku_duel_action_$action$_school_lightning
	clr_country_flag = th_danmaku_duel_action_$action$_school_nature
	clr_country_flag = th_danmaku_duel_action_$action$_school_holy
	clr_country_flag = th_danmaku_duel_action_$action$_school_shadow
	clr_country_flag = th_danmaku_duel_action_$action$_school_necrotic
	clr_country_flag = th_danmaku_duel_action_$action$_school_arcane
	clr_country_flag = th_danmaku_duel_action_$action$_school_infernal
}

th_log_transfer_variables = {
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_value 							which = th_danmaku_duel_of_instance_$instance$_action_$action$_value }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_hit_die						which = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_die }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_hit_die_amount					which = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_die_amount }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_hit_die_result					which = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_die_result }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_enemy_ac						which = th_danmaku_duel_of_instance_$instance$_action_$action$_enemy_ac }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_hit_die_flat_bonus				which = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_die_flat_bonus }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_hit_die_bonus_per_roll			which = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_die_bonus_per_roll }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_attack_die						which = th_danmaku_duel_of_instance_$instance$_action_$action$_attack_die }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_attack_die_amount				which = th_danmaku_duel_of_instance_$instance$_action_$action$_attack_die_amount }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_attack_die_result				which = th_danmaku_duel_of_instance_$instance$_action_$action$_attack_die_result }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_attack_die_bonus_per_roll		which = th_danmaku_duel_of_instance_$instance$_action_$action$_attack_die_bonus_per_roll }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_attack_die_flat_bonus			which = th_danmaku_duel_of_instance_$instance$_action_$action$_attack_die_flat_bonus }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_resistance_reduction			which = th_danmaku_duel_of_instance_$instance$_action_$action$_resistance_reduction }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_type_resistance_reduction		which = th_danmaku_duel_of_instance_$instance$_action_$action$_type_resistance_reduction }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_resistance_reduction	which = th_danmaku_duel_of_instance_$instance$_action_$action$_school_resistance_reduction }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_critical_damage_bonus			which = th_danmaku_duel_of_instance_$instance$_action_$action$_critical_damage_bonus }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_damage_type_multiplicator		which = th_danmaku_duel_of_instance_$instance$_action_$action$_damage_type_multiplicator }
	set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_$past_action$_damage_school_multiplicator	which = th_danmaku_duel_of_instance_$instance$_action_$action$_damage_school_multiplicator }
}

th_log_transfer_variables_solo = {
	set_variable = { which = th_danmaku_duel_action_$past_action$_value 						which = th_danmaku_duel_action_$action$_value }
	set_variable = { which = th_danmaku_duel_action_$past_action$_hit_die						which = th_danmaku_duel_action_$action$_hit_die }
	set_variable = { which = th_danmaku_duel_action_$past_action$_hit_die_amount				which = th_danmaku_duel_action_$action$_hit_die_amount }
	set_variable = { which = th_danmaku_duel_action_$past_action$_hit_die_result				which = th_danmaku_duel_action_$action$_hit_die_result }
	set_variable = { which = th_danmaku_duel_action_$past_action$_enemy_ac						which = th_danmaku_duel_action_$action$_enemy_ac }
	set_variable = { which = th_danmaku_duel_action_$past_action$_hit_die_flat_bonus			which = th_danmaku_duel_action_$action$_hit_die_flat_bonus }
	set_variable = { which = th_danmaku_duel_action_$past_action$_hit_die_bonus_per_roll		which = th_danmaku_duel_action_$action$_hit_die_bonus_per_roll }
	set_variable = { which = th_danmaku_duel_action_$past_action$_attack_die					which = th_danmaku_duel_action_$action$_attack_die }
	set_variable = { which = th_danmaku_duel_action_$past_action$_attack_die_amount				which = th_danmaku_duel_action_$action$_attack_die_amount }
	set_variable = { which = th_danmaku_duel_action_$past_action$_attack_die_result				which = th_danmaku_duel_action_$action$_attack_die_result }
	set_variable = { which = th_danmaku_duel_action_$past_action$_attack_die_bonus_per_roll		which = th_danmaku_duel_action_$action$_attack_die_bonus_per_roll }
	set_variable = { which = th_danmaku_duel_action_$past_action$_attack_die_flat_bonus			which = th_danmaku_duel_action_$action$_attack_die_flat_bonus }
	set_variable = { which = th_danmaku_duel_action_$past_action$_resistance_reduction			which = th_danmaku_duel_action_$action$_resistance_reduction }
	set_variable = { which = th_danmaku_duel_action_$past_action$_type_resistance_reduction		which = th_danmaku_duel_action_$action$_type_resistance_reduction }
	set_variable = { which = th_danmaku_duel_action_$past_action$_school_resistance_reduction	which = th_danmaku_duel_action_$action$_school_resistance_reduction }
	set_variable = { which = th_danmaku_duel_action_$past_action$_critical_damage_bonus			which = th_danmaku_duel_action_$action$_critical_damage_bonus }
	set_variable = { which = th_danmaku_duel_action_$past_action$_damage_type_multiplicator		which = th_danmaku_duel_action_$action$_damage_type_multiplicator }
	set_variable = { which = th_danmaku_duel_action_$past_action$_damage_school_multiplicator	which = th_danmaku_duel_action_$action$_damage_school_multiplicator }
}

th_log_transfer_action = {
	th_log_transfer_variables = { instance = $instance$ action = $action$ past_action = $past_action$ }
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_actor_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_actor_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_actor_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_actor_1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_actor_1 clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_actor_1 }
		th_danmaku_duel_of_instance_$instance$_action_$action$_actor_2 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_actor_2 clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_actor_2 }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_verb_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_uses = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_verb_uses clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_uses }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_performs = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_verb_performs clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_performs }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_casts = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_verb_casts clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_casts }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_enchants = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_verb_enchants clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_enchants }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_curses = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_verb_curses clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_curses }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_strikes = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_verb_strikes clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_strikes }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_shoots = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_verb_shoots clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_shoots }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_attacks = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_verb_attacks clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_verb_attacks }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_article_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_article_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_article_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_article_undefined = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_article_undefined clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_article_undefined }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_article_defined = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_article_defined clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_article_defined }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_attack = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_attack clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_attack }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_preposition_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_preposition_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_preposition_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_preposition_against = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_preposition_against clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_preposition_against }
		th_danmaku_duel_of_instance_$instance$_action_$action$_preposition_on = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_preposition_on clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_preposition_on }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_recipient_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_recipient_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_recipient_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_recipient_1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_recipient_1 clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_recipient_1 }
		th_danmaku_duel_of_instance_$instance$_action_$action$_recipient_2 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_recipient_2 clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_recipient_2 }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_effect_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_miss = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_effect_miss clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_miss }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_dealing = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_effect_dealing clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_dealing }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_healing = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_effect_healing clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_healing }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_restore = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_effect_restore clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_restore }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_afflicting_condition = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_effect_afflicting_condition clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_afflicting_condition }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_gaining_condition = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_effect_gaining_condition clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_effect_gaining_condition }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_number_impact_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_number_impact_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_number_impact_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_number_impact_yes = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_number_impact_yes clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_number_impact_yes }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_damage_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_damage_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_damage_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_damage_yes = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_damage_yes clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_damage_yes }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_health_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_health_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_health_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_health_yes = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_health_yes clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_health_yes }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_mana_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_mana_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_mana_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_mana_yes = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_mana_yes clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_mana_yes }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_action_points_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_action_points_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_action_points_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_action_points_yes = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_action_points_yes clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_action_points_yes }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_critical_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_critical_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_critical_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_critical_yes = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_critical_yes clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_critical_yes }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_miss_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_miss_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_miss_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_is_miss_yes = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_is_miss_yes clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_is_miss_yes }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_hit_roll_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_hit_roll_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_roll_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_hit_roll_yes = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_hit_roll_yes clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_hit_roll_yes }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_roll_NULL = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_roll_NULL clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_roll_NULL }
		th_danmaku_duel_of_instance_$instance$_action_$action$_ability_roll_yes = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_ability_roll_yes clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_ability_roll_yes }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_type_physical = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_type_physical clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_type_physical }
		th_danmaku_duel_of_instance_$instance$_action_$action$_type_magical = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_type_magical clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_type_magical }
		th_danmaku_duel_of_instance_$instance$_action_$action$_type_psionic = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_type_psionic clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_type_psionic }
	}
	trigger_switch = {
		on_trigger = has_province_flag
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_bludgeoning = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_bludgeoning clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_bludgeoning }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_piercing = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_piercing clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_piercing }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_slashing = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_slashing clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_slashing }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_fire = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_fire clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_fire }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_frost = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_frost clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_frost }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_earth = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_earth clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_earth }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_lightning = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_lightning clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_lightning }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_nature = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_nature clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_nature }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_holy = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_holy clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_holy }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_shadow = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_shadow clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_shadow }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_necrotic = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_necrotic clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_necrotic }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_arcane = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_arcane clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_arcane }
		th_danmaku_duel_of_instance_$instance$_action_$action$_school_infernal = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_$past_action$_school_infernal clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_$action$_school_infernal }
	}
}

th_log_transfer_action_solo = {
	th_log_transfer_variables_solo = { action = $action$ past_action = $past_action$ }
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_actor_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_actor_NULL clr_country_flag = th_danmaku_duel_action_$action$_actor_NULL }
		th_danmaku_duel_action_$action$_actor_1 = { set_country_flag = th_danmaku_duel_action_$past_action$_actor_1 clr_country_flag = th_danmaku_duel_action_$action$_actor_1 }
		th_danmaku_duel_action_$action$_actor_2 = { set_country_flag = th_danmaku_duel_action_$past_action$_actor_2 clr_country_flag = th_danmaku_duel_action_$action$_actor_2 }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_ability_verb_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_verb_NULL clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_NULL }
		th_danmaku_duel_action_$action$_ability_verb_uses = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_verb_uses clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_uses }
		th_danmaku_duel_action_$action$_ability_verb_performs = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_verb_performs clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_performs }
		th_danmaku_duel_action_$action$_ability_verb_casts = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_verb_casts clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_casts }
		th_danmaku_duel_action_$action$_ability_verb_enchants = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_verb_enchants clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_enchants }
		th_danmaku_duel_action_$action$_ability_verb_curses = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_verb_curses clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_curses }
		th_danmaku_duel_action_$action$_ability_verb_strikes = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_verb_strikes clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_strikes }
		th_danmaku_duel_action_$action$_ability_verb_shoots = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_verb_shoots clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_shoots }
		th_danmaku_duel_action_$action$_ability_verb_attacks = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_verb_attacks clr_country_flag = th_danmaku_duel_action_$action$_ability_verb_attacks }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_ability_article_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_article_NULL clr_country_flag = th_danmaku_duel_action_$action$_ability_article_NULL }
		th_danmaku_duel_action_$action$_ability_article_undefined = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_article_undefined clr_country_flag = th_danmaku_duel_action_$action$_ability_article_undefined }
		th_danmaku_duel_action_$action$_ability_article_defined = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_article_defined clr_country_flag = th_danmaku_duel_action_$action$_ability_article_defined }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_ability_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_NULL clr_country_flag = th_danmaku_duel_action_$action$_ability_NULL }
		th_danmaku_duel_action_$action$_ability_attack = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_attack clr_country_flag = th_danmaku_duel_action_$action$_ability_attack }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_preposition_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_preposition_NULL clr_country_flag = th_danmaku_duel_action_$action$_preposition_NULL }
		th_danmaku_duel_action_$action$_preposition_against = { set_country_flag = th_danmaku_duel_action_$past_action$_preposition_against clr_country_flag = th_danmaku_duel_action_$action$_preposition_against }
		th_danmaku_duel_action_$action$_preposition_on = { set_country_flag = th_danmaku_duel_action_$past_action$_preposition_on clr_country_flag = th_danmaku_duel_action_$action$_preposition_on }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_recipient_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_recipient_NULL clr_country_flag = th_danmaku_duel_action_$action$_recipient_NULL }
		th_danmaku_duel_action_$action$_recipient_1 = { set_country_flag = th_danmaku_duel_action_$past_action$_recipient_1 clr_country_flag = th_danmaku_duel_action_$action$_recipient_1 }
		th_danmaku_duel_action_$action$_recipient_2 = { set_country_flag = th_danmaku_duel_action_$past_action$_recipient_2 clr_country_flag = th_danmaku_duel_action_$action$_recipient_2 }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_ability_effect_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_effect_NULL clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_NULL }
		th_danmaku_duel_action_$action$_ability_effect_miss = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_effect_miss clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_miss }
		th_danmaku_duel_action_$action$_ability_effect_dealing = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_effect_dealing clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_dealing }
		th_danmaku_duel_action_$action$_ability_effect_healing = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_effect_healing clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_healing }
		th_danmaku_duel_action_$action$_ability_effect_restore = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_effect_restore clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_restore }
		th_danmaku_duel_action_$action$_ability_effect_afflicting_condition = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_effect_afflicting_condition clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_afflicting_condition }
		th_danmaku_duel_action_$action$_ability_effect_gaining_condition = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_effect_gaining_condition clr_country_flag = th_danmaku_duel_action_$action$_ability_effect_gaining_condition }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_number_impact_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_number_impact_NULL clr_country_flag = th_danmaku_duel_action_$action$_number_impact_NULL }
		th_danmaku_duel_action_$action$_number_impact_yes = { set_country_flag = th_danmaku_duel_action_$past_action$_number_impact_yes clr_country_flag = th_danmaku_duel_action_$action$_number_impact_yes }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_is_damage_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_is_damage_NULL clr_country_flag = th_danmaku_duel_action_$action$_is_damage_NULL }
		th_danmaku_duel_action_$action$_is_damage_yes = { set_country_flag = th_danmaku_duel_action_$past_action$_is_damage_yes clr_country_flag = th_danmaku_duel_action_$action$_is_damage_yes }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_is_health_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_is_health_NULL clr_country_flag = th_danmaku_duel_action_$action$_is_health_NULL }
		th_danmaku_duel_action_$action$_is_health_yes = { set_country_flag = th_danmaku_duel_action_$past_action$_is_health_yes clr_country_flag = th_danmaku_duel_action_$action$_is_health_yes }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_is_mana_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_is_mana_NULL clr_country_flag = th_danmaku_duel_action_$action$_is_mana_NULL }
		th_danmaku_duel_action_$action$_is_mana_yes = { set_country_flag = th_danmaku_duel_action_$past_action$_is_mana_yes clr_country_flag = th_danmaku_duel_action_$action$_is_mana_yes }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_is_action_points_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_is_action_points_NULL clr_country_flag = th_danmaku_duel_action_$action$_is_action_points_NULL }
		th_danmaku_duel_action_$action$_is_action_points_yes = { set_country_flag = th_danmaku_duel_action_$past_action$_is_action_points_yes clr_country_flag = th_danmaku_duel_action_$action$_is_action_points_yes }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_is_critical_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_is_critical_NULL clr_country_flag = th_danmaku_duel_action_$action$_is_critical_NULL }
		th_danmaku_duel_action_$action$_is_critical_yes = { set_country_flag = th_danmaku_duel_action_$past_action$_is_critical_yes clr_country_flag = th_danmaku_duel_action_$action$_is_critical_yes }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_is_miss_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_is_miss_NULL clr_country_flag = th_danmaku_duel_action_$action$_is_miss_NULL }
		th_danmaku_duel_action_$action$_is_miss_yes = { set_country_flag = th_danmaku_duel_action_$past_action$_is_miss_yes clr_country_flag = th_danmaku_duel_action_$action$_is_miss_yes }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_hit_roll_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_hit_roll_NULL clr_country_flag = th_danmaku_duel_action_$action$_hit_roll_NULL }
		th_danmaku_duel_action_$action$_hit_roll_yes = { set_country_flag = th_danmaku_duel_action_$past_action$_hit_roll_yes clr_country_flag = th_danmaku_duel_action_$action$_hit_roll_yes }
	}
	trigger_switch = {
		on_trigger = has_country_flag
		th_danmaku_duel_action_$action$_ability_roll_NULL = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_roll_NULL clr_country_flag = th_danmaku_duel_action_$action$_ability_roll_NULL }
		th_danmaku_duel_action_$action$_ability_roll_yes = { set_country_flag = th_danmaku_duel_action_$past_action$_ability_roll_yes clr_country_flag = th_danmaku_duel_action_$action$_ability_roll_yes }
	}
}

# total_value = the end result of damage / healing
# hit_die = die used to hit the target
# hit_die_amount = amount of hit die used
# hit_die_result = the result from rolling hit_die_amount d hit_die
# enemy_ac = the ac at the moment of the die roll happening
# hit_die_flat_bonus = amount of flat bonus added to the hit die after all the die were rolled
# hit_die_bonus_per_roll = amount of bonus added atop of each hit die
# attack_die
# attack_die_amount
# attack_die_result
# attack_die_bonus_per_roll
# attack_die_flat_bonus
# resistance_reduction = amount of damage resisted
# type_resistance_reduction
# school_resistance_reduction
# critical_damage_bonus
# damage_type_multiplicator
# damage_school_multiplicator
th_log_memorize_value = {
	set_variable = {
		which = th_danmaku_effect_$type$
		which = $variable$
	}
}

th_log_memorize_type = {
	set_country_flag = th_danmaku_effect_$type$_flag
}
th_log_ability = {
	hidden_effect = {
		1 = {
			if = {
				limit = { NOT = { check_variable = { which = th_danmaku_duel_logged_actions_for_instance_$instance$ value = 15 } } }
				change_variable = {
					which = th_danmaku_duel_logged_actions_for_instance_$instance$
					value = 1
				}
			}
			th_log_cleanup_action = { instance = $instance$ action = 15 }
			th_log_transfer_action = { instance = $instance$ action = 14 past_action = 15 }
			th_log_transfer_action = { instance = $instance$ action = 13 past_action = 14 }
			th_log_transfer_action = { instance = $instance$ action = 12 past_action = 13 }
			th_log_transfer_action = { instance = $instance$ action = 11 past_action = 12 }
			th_log_transfer_action = { instance = $instance$ action = 10 past_action = 11 }
			th_log_transfer_action = { instance = $instance$ action = 9 past_action = 10 }
			th_log_transfer_action = { instance = $instance$ action = 8 past_action = 9 }
			th_log_transfer_action = { instance = $instance$ action = 7 past_action = 8 }
			th_log_transfer_action = { instance = $instance$ action = 6 past_action = 7 }
			th_log_transfer_action = { instance = $instance$ action = 5 past_action = 6 }
			th_log_transfer_action = { instance = $instance$ action = 4 past_action = 5 }
			th_log_transfer_action = { instance = $instance$ action = 3 past_action = 4 }
			th_log_transfer_action = { instance = $instance$ action = 2 past_action = 3 }
			th_log_transfer_action = { instance = $instance$ action = 1 past_action = 2 }
			PREV = {
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_value 							which = th_danmaku_effect_total_value }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_hit_die						which = th_danmaku_effect_hit_die }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_hit_die_amount					which = th_danmaku_effect_hit_die_amount }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_hit_die_result					which = th_danmaku_effect_hit_die_result }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_enemy_ac						which = th_danmaku_effect_enemy_ac }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_hit_die_flat_bonus				which = th_danmaku_effect_hit_die_flat_bonus }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_hit_die_bonus_per_roll			which = th_danmaku_effect_hit_die_bonus_per_roll }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_attack_die				 		which = th_danmaku_effect_attack_die }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_attack_die_amount				which = th_danmaku_effect_attack_die_amount }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_attack_die_result				which = th_danmaku_effect_attack_die_result }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_attack_die_bonus_per_roll		which = th_danmaku_effect_attack_die_bonus_per_roll }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_attack_die_flat_bonus			which = th_danmaku_effect_attack_die_flat_bonus }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_resistance_reduction			which = th_danmaku_effect_resistance_reduction }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_type_resistance_reduction		which = th_danmaku_effect_type_resistance_reduction }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_school_resistance_reduction	which = th_danmaku_effect_school_resistance_reduction }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_critical_damage_bonus			which = th_danmaku_effect_critical_damage_bonus }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_damage_type_multiplicator		which = th_danmaku_effect_damage_type_multiplicator }
				set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_damage_school_multiplicator	which = th_danmaku_effect_damage_school_multiplicator }
				1 = {
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_value 							which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_hit_die						which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_hit_die_amount					which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_hit_die_result					which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_enemy_ac						which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_hit_die_flat_bonus				which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_hit_die_bonus_per_roll			which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_attack_die						which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_attack_die_amount				which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_attack_die_result				which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_attack_die_bonus_per_roll		which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_attack_die_flat_bonus			which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_resistance_reduction			which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_type_resistance_reduction		which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_school_resistance_reduction	which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_critical_damage_bonus			which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_damage_type_multiplicator		which = PREV }
					set_variable = { which = th_danmaku_duel_of_instance_$instance$_action_1_damage_school_multiplicator	which = PREV }
				}
			}			
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_actor_$actor$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_ability_verb_$verb$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_ability_article_$article$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_ability_$ability$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_preposition_$preposition$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_recipient_$recipient$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_ability_effect_$ability_effect$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_number_impact_$number_impact$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_damage_$is_damage$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_health_$is_health$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_mana_$is_mana$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_action_points_$is_action_points$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_critical_$is_critical$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_hit_roll_$hit_roll$
			set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_ability_roll_$ability_roll$
		}
		if = {
			limit = { has_ruler_flag = th_danmaku_duel_missed_attack }
			1 = {
				clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_ability_roll_yes
				set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_ability_roll_NULL
				clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_critical_yes
				set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_critical_NULL
				clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_damage_yes
				set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_damage_NULL
				clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_number_impact_yes
				set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_number_impact_NULL
				clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_miss_NULL
				set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_miss_yes
			}
		}
		if = {
			limit = { has_ruler_flag = th_danmaku_rolled_critical_hit }
			1 = {
				clr_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_critical_NULL
				set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_is_critical_yes
			}
		}
		trigger_switch = {
			on_trigger = has_country_flag
			th_danmaku_effect_damage_type_physical_flag = { clr_country_flag = th_danmaku_effect_damage_type_physical_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_bludgeoning } }
			th_danmaku_effect_damage_type_magical_flag = { clr_country_flag = th_danmaku_effect_damage_type_magical_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_piercing } }
			th_danmaku_effect_damage_type_psionic_flag = { clr_country_flag = th_danmaku_effect_damage_type_psionic_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_slashing } }
		}
		trigger_switch = {
			on_trigger = has_country_flag
			th_danmaku_effect_damage_school_bludgeoning_flag = { clr_country_flag = th_danmaku_effect_damage_school_bludgeoning_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_bludgeoning } }
			th_danmaku_effect_damage_school_piercing_flag = { clr_country_flag = th_danmaku_effect_damage_school_piercing_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_piercing } }
			th_danmaku_effect_damage_school_slashing_flag = { clr_country_flag = th_danmaku_effect_damage_school_slashing_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_slashing } }
			th_danmaku_effect_damage_school_fire_flag = { clr_country_flag = th_danmaku_effect_damage_school_fire_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_fire } }
			th_danmaku_effect_damage_school_frost_flag = { clr_country_flag = th_danmaku_effect_damage_school_frost_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_frost } }
			th_danmaku_effect_damage_school_earth_flag = { clr_country_flag = th_danmaku_effect_damage_school_earth_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_earth } }
			th_danmaku_effect_damage_school_lightning_flag = { clr_country_flag = th_danmaku_effect_damage_school_lightning_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_lightning } }
			th_danmaku_effect_damage_school_nature_flag = { clr_country_flag = th_danmaku_effect_damage_school_nature_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_nature } }
			th_danmaku_effect_damage_school_holy_flag = { clr_country_flag = th_danmaku_effect_damage_school_holy_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_holy } }
			th_danmaku_effect_damage_school_shadow_flag = { clr_country_flag = th_danmaku_effect_damage_school_shadow_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_shadow } }
			th_danmaku_effect_damage_school_necrotic_flag = { clr_country_flag = th_danmaku_effect_damage_school_necrotic_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_necrotic } }
			th_danmaku_effect_damage_school_arcane_flag = { clr_country_flag = th_danmaku_effect_damage_school_arcane_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_arcane } }
			th_danmaku_effect_damage_school_infernal_flag = { clr_country_flag = th_danmaku_effect_damage_school_infernal_flag 1 = { set_province_flag = th_danmaku_duel_of_instance_$instance$_action_1_school_infernal } }
		}
	}
}

th_log_ability_solo = {
	hidden_effect = {
		if = {
			limit = { check_variable = { which = th_danmaku_duel_logged_actions value = 15 } }
			set_variable = {
				which = th_danmaku_duel_logged_actions
				value = 1
			}
		}
		else = {
			change_variable = {
				which = th_danmaku_duel_logged_actions
				value = 1
			}
		}
		th_log_cleanup_action_solo = { action = 15 }
		th_log_transfer_action_solo = { action = 14 past_action = 15 }
		th_log_transfer_action_solo = { action = 13 past_action = 14 }
		th_log_transfer_action_solo = { action = 12 past_action = 13 }
		th_log_transfer_action_solo = { action = 11 past_action = 12 }
		th_log_transfer_action_solo = { action = 10 past_action = 11 }
		th_log_transfer_action_solo = { action = 9 past_action = 10 }
		th_log_transfer_action_solo = { action = 8 past_action = 9 }
		th_log_transfer_action_solo = { action = 7 past_action = 8 }
		th_log_transfer_action_solo = { action = 6 past_action = 7 }
		th_log_transfer_action_solo = { action = 5 past_action = 6 }
		th_log_transfer_action_solo = { action = 4 past_action = 5 }
		th_log_transfer_action_solo = { action = 3 past_action = 4 }
		th_log_transfer_action_solo = { action = 2 past_action = 3 }
		th_log_transfer_action_solo = { action = 1 past_action = 2 }
		set_variable = { which = th_danmaku_duel_action_1_value 						which = th_danmaku_effect_total_value }
		set_variable = { which = th_danmaku_duel_action_1_hit_die						which = th_danmaku_effect_hit_die }
		set_variable = { which = th_danmaku_duel_action_1_hit_die_amount				which = th_danmaku_effect_hit_die_amount }
		set_variable = { which = th_danmaku_duel_action_1_hit_die_result				which = th_danmaku_effect_hit_die_result }
		set_variable = { which = th_danmaku_duel_action_1_enemy_ac						which = th_danmaku_effect_enemy_ac }
		set_variable = { which = th_danmaku_duel_action_1_hit_die_flat_bonus			which = th_danmaku_effect_hit_die_flat_bonus }
		set_variable = { which = th_danmaku_duel_action_1_hit_die_bonus_per_roll		which = th_danmaku_effect_hit_die_bonus_per_roll }
		set_variable = { which = th_danmaku_duel_action_1_attack_die					which = th_danmaku_effect_attack_die }
		set_variable = { which = th_danmaku_duel_action_1_attack_die_amount				which = th_danmaku_effect_attack_die_amount }
		set_variable = { which = th_danmaku_duel_action_1_attack_die_result				which = th_danmaku_effect_attack_die_result }
		set_variable = { which = th_danmaku_duel_action_1_attack_die_bonus_per_roll		which = th_danmaku_effect_attack_die_bonus_per_roll }
		set_variable = { which = th_danmaku_duel_action_1_attack_die_flat_bonus			which = th_danmaku_effect_attack_die_flat_bonus }
		set_variable = { which = th_danmaku_duel_action_1_resistance_reduction			which = th_danmaku_effect_resistance_reduction }
		set_variable = { which = th_danmaku_duel_action_1_type_resistance_reduction		which = th_danmaku_effect_type_resistance_reduction }
		set_variable = { which = th_danmaku_duel_action_1_school_resistance_reduction	which = th_danmaku_effect_school_resistance_reduction }
		set_variable = { which = th_danmaku_duel_action_1_critical_damage_bonus			which = th_danmaku_effect_critical_damage_bonus }
		set_variable = { which = th_danmaku_duel_action_1_damage_type_multiplicator		which = th_danmaku_effect_damage_type_multiplicator }
		set_variable = { which = th_danmaku_duel_action_1_damage_school_multiplicator	which = th_danmaku_effect_damage_school_multiplicator }
		
		
		set_country_flag = th_danmaku_duel_action_1_actor_$actor$
		set_country_flag = th_danmaku_duel_action_1_ability_verb_$verb$
		set_country_flag = th_danmaku_duel_action_1_ability_article_$article$
		set_country_flag = th_danmaku_duel_action_1_ability_$ability$
		set_country_flag = th_danmaku_duel_action_1_preposition_$preposition$
		set_country_flag = th_danmaku_duel_action_1_recipient_$recipient$
		set_country_flag = th_danmaku_duel_action_1_ability_effect_$ability_effect$
		set_country_flag = th_danmaku_duel_action_1_number_impact_$number_impact$
		set_country_flag = th_danmaku_duel_action_1_is_damage_$is_damage$
		set_country_flag = th_danmaku_duel_action_1_is_health_$is_health$
		set_country_flag = th_danmaku_duel_action_1_is_mana_$is_mana$
		set_country_flag = th_danmaku_duel_action_1_is_action_points_$is_action_points$
		set_country_flag = th_danmaku_duel_action_1_is_critical_$is_critical$
		set_country_flag = th_danmaku_duel_action_1_hit_roll_$hit_roll$
		set_country_flag = th_danmaku_duel_action_1_ability_roll_$ability_roll$
		trigger_switch = {
			on_trigger = has_country_flag
			th_danmaku_effect_damage_type_physical_flag = { clr_country_flag = th_danmaku_effect_damage_type_physical_flag set_country_flag = th_danmaku_duel_action_$action$_type_physical }
			th_danmaku_effect_damage_type_magical_flag = { clr_country_flag = th_danmaku_effect_damage_type_magical_flag set_country_flag = th_danmaku_duel_action_$action$_type_magical }
			th_danmaku_effect_damage_type_psionic_flag = { clr_country_flag = th_danmaku_effect_damage_type_psionic_flag set_country_flag = th_danmaku_duel_action_$action$_type_psionic }
		}
		trigger_switch = {
			on_trigger = has_country_flag
			th_danmaku_effect_damage_school_bludgeoning_flag = { clr_country_flag = th_danmaku_effect_damage_school_bludgeoning_flag set_country_flag = th_danmaku_duel_action_1_school_bludgeoning }
			th_danmaku_effect_damage_school_piercing_flag = { clr_country_flag = th_danmaku_effect_damage_school_piercing_flag set_country_flag = th_danmaku_duel_action_1_school_piercing }
			th_danmaku_effect_damage_school_slashing_flag = { clr_country_flag = th_danmaku_effect_damage_school_slashing_flag set_country_flag = th_danmaku_duel_action_1_school_slashing }
			th_danmaku_effect_damage_school_fire_flag = { clr_country_flag = th_danmaku_effect_damage_school_fire_flag set_country_flag = th_danmaku_duel_action_1_school_fire }
			th_danmaku_effect_damage_school_frost_flag = { clr_country_flag = th_danmaku_effect_damage_school_frost_flag set_country_flag = th_danmaku_duel_action_1_school_frost }
			th_danmaku_effect_damage_school_earth_flag = { clr_country_flag = th_danmaku_effect_damage_school_earth_flag set_country_flag = th_danmaku_duel_action_1_school_earth }
			th_danmaku_effect_damage_school_lightning_flag = { clr_country_flag = th_danmaku_effect_damage_school_lightning_flag set_country_flag = th_danmaku_duel_action_1_school_lightning }
			th_danmaku_effect_damage_school_nature_flag = { clr_country_flag = th_danmaku_effect_damage_school_nature_flag set_country_flag = th_danmaku_duel_action_1_school_nature }
			th_danmaku_effect_damage_school_holy_flag = { clr_country_flag = th_danmaku_effect_damage_school_holy_flag set_country_flag = th_danmaku_duel_action_1_school_holy }
			th_danmaku_effect_damage_school_shadow_flag = { clr_country_flag = th_danmaku_effect_damage_school_shadow_flag set_country_flag = th_danmaku_duel_action_1_school_shadow }
			th_danmaku_effect_damage_school_necrotic_flag = { clr_country_flag = th_danmaku_effect_damage_school_necrotic_flag set_country_flag = th_danmaku_duel_action_1_school_necrotic }
			th_danmaku_effect_damage_school_arcane_flag = { clr_country_flag = th_danmaku_effect_damage_school_arcane_flag set_country_flag = th_danmaku_duel_action_1_school_arcane }
			th_danmaku_effect_damage_school_infernal_flag = { clr_country_flag = th_danmaku_effect_damage_school_infernal_flag set_country_flag = th_danmaku_duel_action_1_school_infernal }
		}
		if = {
			limit = { has_ruler_flag = th_danmaku_duel_missed_attack }
			clr_country_flag = th_danmaku_duel_action_1_ability_roll_yes
			set_country_flag = th_danmaku_duel_action_1_ability_roll_NULL
			clr_country_flag = th_danmaku_duel_action_1_is_critical_yes
			set_country_flag = th_danmaku_duel_action_1_is_critical_NULL
			clr_country_flag = th_danmaku_duel_action_1_is_damage_yes
			set_country_flag = th_danmaku_duel_action_1_is_damage_NULL
			clr_country_flag = th_danmaku_duel_action_1_number_impact_yes
			set_country_flag = th_danmaku_duel_action_1_number_impact_NULL
			clr_country_flag = th_danmaku_duel_action_1_is_miss_NULL
			set_country_flag = th_danmaku_duel_action_1_is_miss_yes
		}
		if = {
			limit = { has_ruler_flag = th_danmaku_rolled_critical_hit }
			clr_country_flag = th_danmaku_duel_action_1_is_critical_NULL
			set_country_flag = th_danmaku_duel_action_1_is_critical_yes
		}
	}
}

th_log_ability_for_current_instance = {
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 1 } }
		th_log_ability = {
			instance = 1
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 2 } }
		th_log_ability = {
			instance = 2
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 3 } }
		th_log_ability = {
			instance = 3
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 4 } }
		th_log_ability = {
			instance = 4
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 5 } }
		th_log_ability = {
			instance = 5
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 6 } }
		th_log_ability = {
			instance = 6
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 7 } }
		th_log_ability = {
			instance = 7
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 8 } }
		th_log_ability = {
			instance = 8
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 9 } }
		th_log_ability = {
			instance = 9
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 10 } }
		th_log_ability = {
			instance = 10
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 11 } }
		th_log_ability = {
			instance = 11
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 12 } }
		th_log_ability = {
			instance = 12
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 13 } }
		th_log_ability = {
			instance = 13
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 14 } }
		th_log_ability = {
			instance = 14
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 15 } }
		th_log_ability = {
			instance = 15
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 16 } }
		th_log_ability = {
			instance = 16
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 17 } }
		th_log_ability = {
			instance = 17
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 18 } }
		th_log_ability = {
			instance = 18
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 19 } }
		th_log_ability = {
			instance = 19
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 20 } }
		th_log_ability = {
			instance = 20
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 21 } }
		th_log_ability = {
			instance = 21
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 22 } }
		th_log_ability = {
			instance = 22
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 23 } }
		th_log_ability = {
			instance = 23
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 24 } }
		th_log_ability = {
			instance = 24
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 25 } }
		th_log_ability = {
			instance = 25
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 26 } }
		th_log_ability = {
			instance = 26
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 27 } }
		th_log_ability = {
			instance = 27
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 28 } }
		th_log_ability = {
			instance = 28
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 29 } }
		th_log_ability = {
			instance = 29
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
	if = {
		limit = { th_get_danmaku_duel_instance = { instance = 30 } }
		th_log_ability = {
			instance = 30
			actor = $actor$
			verb = $verb$
			article = $article$
			ability = $ability$
			preposition = $preposition$
			recipient = $recipient$
			ability_effect = $ability_effect$
			number_impact = $number_impact$
			is_damage = $is_damage$
			is_health = $is_health$
			is_mana = $is_mana$
			is_action_points = $is_action_points$
			is_critical = $is_critical$
			hit_roll = $hit_roll$
			ability_roll = $ability_roll$
		}
	}
}


th_log_ability_for_current_actor_against_nobody = {
	if = {
		limit = { th_is_duelling_an_unlanded_character = yes }
		if = {
			limit = { th_has_turn_ownership = yes }
			#1 is always the current ruler in a solo duel
			th_log_ability_solo = {
				actor = 1
				verb = $verb$
				article = $article$
				ability = $ability$
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
		else = {
			th_log_ability_solo = {
				actor = 2
				verb = $verb$
				article = $article$
				ability = $ability$
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
	}
	else = {
		if = {
			limit = { th_is_country_id_danmaku_duel = { country_id = 1 } }
			th_log_ability_for_current_instance = {
				actor = 1
				verb = $verb$
				article = $article$
				ability = $ability$
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
		else = {
			th_log_ability_for_current_instance = {
				actor = 2
				verb = $verb$
				article = $article$
				ability = $ability$
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
	}
}
th_log_ability_for_current_actor_against_self = {
	if = {
		limit = { th_is_duelling_an_unlanded_character = yes }
		if = {
			limit = { th_has_turn_ownership = yes }
			th_log_ability_solo = {
				actor = 1
				verb = $verb$
				article = $article$
				ability = $ability$
				preposition = $preposition$
				recipient = 1
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
		else = {
			th_log_ability_solo = {
				actor = 2
				verb = $verb$
				article = $article$
				ability = $ability$
				preposition = $preposition$
				recipient = 2
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
	}
	else = {
		if = {
			limit = { th_is_country_id_danmaku_duel = { country_id = 1 } }
			th_log_ability_for_current_instance = {
				actor = 1
				verb = $verb$
				article = $article$
				ability = $ability$
				preposition = $preposition$
				recipient = 1
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
		else = {
			th_log_ability_for_current_instance = {
				actor = 2
				verb = $verb$
				article = $article$
				ability = $ability$
				preposition = $preposition$
				recipient = 2
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
	}
}
th_log_ability_for_current_actor_against_current_recipient = {
	if = {
		limit = { th_is_duelling_an_unlanded_character = yes }
		if = {
			limit = { th_has_turn_ownership = yes }
			th_log_ability_solo = {
				actor = 1
				verb = $verb$
				article = $article$
				ability = $ability$
				preposition = $preposition$
				recipient = 2
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
		else = {
			th_log_ability_solo = {
				actor = 2
				verb = $verb$
				article = $article$
				ability = $ability$
				preposition = $preposition$
				recipient = 1
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
	}
	else = {
		if = {
			limit = { th_is_country_id_danmaku_duel = { country_id = 1 } }
			th_log_ability_for_current_instance = {
				actor = 1
				verb = $verb$
				article = $article$
				ability = $ability$
				preposition = $preposition$
				recipient = 2
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
		else = {
			th_log_ability_for_current_instance = {
				actor = 2
				verb = $verb$
				article = $article$
				ability = $ability$
				preposition = $preposition$
				recipient = 1
				ability_effect = $ability_effect$
				number_impact = $number_impact$
				is_damage = $is_damage$
				is_health = $is_health$
				is_mana = $is_mana$
				is_action_points = $is_action_points$
				is_critical = $is_critical$
				hit_roll = $hit_roll$
				ability_roll = $ability_roll$
			}
		}
	}
}
th_create_ability_combat_log = {
	th_log_ability_for_current_actor_against_$type$ = {
		verb = $verb$
		article = $article$
		ability = $ability$
		preposition = $preposition$
		ability_effect = $ability_effect$
		number_impact = $number_impact$
		is_damage = $is_damage$
		is_health = $is_health$
		is_mana = $is_mana$
		is_action_points = $is_action_points$
		is_critical = $is_critical$
		hit_roll = $hit_roll$
		ability_roll = $ability_roll$
	}
}

th_use_ability_attack = {
	th_change_combat_resource_ability = { ability = attack type = action_points value = -30 }
	th_perform_attack = {
		ability = attack
		type = physical
		school = piercing
	}
	th_create_ability_combat_log = {
		type = current_recipient
		verb = attacks
		article = NULL
		ability = NULL
		preposition = NULL
		ability_effect = dealing
		number_impact = yes
		is_damage = yes
		is_health = NULL
		is_mana = NULL
		is_action_points = NULL
		is_critical = NULL
		hit_roll = yes
		ability_roll = yes
	}
}

th_clear_shared_danmaku_flags = {
	clr_country_flag = th_is_in_a_danmaku_duel
	clr_ruler_flag = th_ruler_is_in_a_danmaku_duel
	clr_ruler_flag = th_danmaku_has_turn_ownership
	clr_ruler_flag = th_danmaku_has_not_turn_ownership
	clr_ruler_flag = th_danmaku_unlanded_character_not_turn_ownership
	clr_ruler_flag = th_danmaku_unlanded_character_turn_ownership
	clr_ruler_flag = th_danmaku_rolled_critical_hit
	clr_ruler_flag = th_danmaku_duel_hit_attack
	clr_ruler_flag = th_danmaku_duel_missed_attack
	clr_ruler_flag = th_danmaku_duel_over
	clr_country_flag = th_opened_danmaku_battle_window
	clr_country_flag = th_danmaku_locked_actions
}

th_clear_danmaku_flags = {
	th_clear_shared_danmaku_flags = yes
	clr_country_flag = th_is_in_danmaku_duel_instance_$instance$
	clr_ruler_flag = th_is_country_1_in_danmaku_duel_of_$instance$
	clr_ruler_flag = th_is_country_2_in_danmaku_duel_of_$instance$
}

th_clear_solo_danmaku_flags = {
	th_clear_shared_danmaku_flags = yes
}

th_clear_combat_for_instance = {
	th_clear_danmaku_flags = { instance = $instance$ }
	1 = {
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = th_danmaku_instance_$instance$_cleaner	#Both players have to leave combat before the instance is destroyed. This way a player can consultate the combat log first before leaving.
						value = 1
					}
				}
			}
			set_variable = { which = th_danmaku_instance_$instance$_cleaner value = 1 }
		}
		else = {
			change_variable = { which = th_danmaku_instance_$instance$_cleaner value = 1 }
		}
		if = {
			limit = { check_variable = { which = th_danmaku_instance_$instance$_cleaner value = 2 } }
			clr_province_flag = th_danmaku_duel_instance_$instance$_online
			th_log_cleanup_action = { instance = $instance$ action = 1 }
			th_log_cleanup_action = { instance = $instance$ action = 2 }
			th_log_cleanup_action = { instance = $instance$ action = 3 }
			th_log_cleanup_action = { instance = $instance$ action = 4 }
			th_log_cleanup_action = { instance = $instance$ action = 5 }
			th_log_cleanup_action = { instance = $instance$ action = 6 }
			th_log_cleanup_action = { instance = $instance$ action = 7 }
			th_log_cleanup_action = { instance = $instance$ action = 8 }
			th_log_cleanup_action = { instance = $instance$ action = 9 }
			th_log_cleanup_action = { instance = $instance$ action = 10 }
			th_log_cleanup_action = { instance = $instance$ action = 11 }
			th_log_cleanup_action = { instance = $instance$ action = 12 }
			th_log_cleanup_action = { instance = $instance$ action = 13 }
			th_log_cleanup_action = { instance = $instance$ action = 14 }
			th_log_cleanup_action = { instance = $instance$ action = 15 }
			set_variable = { which = th_danmaku_instance_$instance$_cleaner value = 0 }
		}
	}
}

th_clear_combat_solo = {
	th_clear_solo_danmaku_flags = yes
	th_log_cleanup_action_solo = { action = 1 }
	th_log_cleanup_action_solo = { action = 2 }
	th_log_cleanup_action_solo = { action = 3 }
	th_log_cleanup_action_solo = { action = 4 }
	th_log_cleanup_action_solo = { action = 5 }
	th_log_cleanup_action_solo = { action = 6 }
	th_log_cleanup_action_solo = { action = 7 }
	th_log_cleanup_action_solo = { action = 8 }
	th_log_cleanup_action_solo = { action = 9 }
	th_log_cleanup_action_solo = { action = 10 }
	th_log_cleanup_action_solo = { action = 11 }
	th_log_cleanup_action_solo = { action = 12 }
	th_log_cleanup_action_solo = { action = 13 }
	th_log_cleanup_action_solo = { action = 14 }
	th_log_cleanup_action_solo = { action = 15 }
}

th_force_clear_combat_for_instance = {
	th_clear_danmaku_flags = { instance = $instance$ }
	1 = {
		clr_province_flag = th_danmaku_duel_instance_$instance$_online
		th_log_cleanup_action = { instance = $instance$ action = 1 }
		th_log_cleanup_action = { instance = $instance$ action = 2 }
		th_log_cleanup_action = { instance = $instance$ action = 3 }
		th_log_cleanup_action = { instance = $instance$ action = 4 }
		th_log_cleanup_action = { instance = $instance$ action = 5 }
		th_log_cleanup_action = { instance = $instance$ action = 6 }
		th_log_cleanup_action = { instance = $instance$ action = 7 }
		th_log_cleanup_action = { instance = $instance$ action = 8 }
		th_log_cleanup_action = { instance = $instance$ action = 9 }
		th_log_cleanup_action = { instance = $instance$ action = 10 }
		th_log_cleanup_action = { instance = $instance$ action = 11 }
		th_log_cleanup_action = { instance = $instance$ action = 12 }
		th_log_cleanup_action = { instance = $instance$ action = 13 }
		th_log_cleanup_action = { instance = $instance$ action = 14 }
		th_log_cleanup_action = { instance = $instance$ action = 15 }
		set_variable = { which = th_danmaku_instance_$instance$_cleaner value = 0 }
	}
}

#This effect needs to be called twice to end combat
#Both parties get an event to kill the instance
th_deactivate_current_instance = {
	hidden_effect = {
		if = { limit = { th_get_danmaku_duel_instance = { instance = 1 } }  th_clear_combat_for_instance = { instance = 1 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 2 } }  th_clear_combat_for_instance = { instance = 2 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 3 } }  th_clear_combat_for_instance = { instance = 3 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 4 } }  th_clear_combat_for_instance = { instance = 4 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 5 } }  th_clear_combat_for_instance = { instance = 5 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 6 } }  th_clear_combat_for_instance = { instance = 6 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 7 } }  th_clear_combat_for_instance = { instance = 7 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 8 } }  th_clear_combat_for_instance = { instance = 8 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 9 } }  th_clear_combat_for_instance = { instance = 9 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 10 } } th_clear_combat_for_instance = { instance = 10 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 11 } } th_clear_combat_for_instance = { instance = 11 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 12 } } th_clear_combat_for_instance = { instance = 12 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 13 } } th_clear_combat_for_instance = { instance = 13 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 14 } } th_clear_combat_for_instance = { instance = 14 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 15 } } th_clear_combat_for_instance = { instance = 15 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 16 } } th_clear_combat_for_instance = { instance = 16 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 17 } } th_clear_combat_for_instance = { instance = 17 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 18 } } th_clear_combat_for_instance = { instance = 18 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 19 } } th_clear_combat_for_instance = { instance = 19 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 20 } } th_clear_combat_for_instance = { instance = 20 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 21 } } th_clear_combat_for_instance = { instance = 21 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 22 } } th_clear_combat_for_instance = { instance = 22 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 23 } } th_clear_combat_for_instance = { instance = 23 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 24 } } th_clear_combat_for_instance = { instance = 24 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 25 } } th_clear_combat_for_instance = { instance = 25 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 26 } } th_clear_combat_for_instance = { instance = 26 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 27 } } th_clear_combat_for_instance = { instance = 27 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 28 } } th_clear_combat_for_instance = { instance = 28 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 29 } } th_clear_combat_for_instance = { instance = 29 } }
		if = { limit = { th_get_danmaku_duel_instance = { instance = 30 } } th_clear_combat_for_instance = { instance = 30 } }
	}
}

th_setup_solo_variables = {
	set_variable = { which = th_danmaku_duel_action_1_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_attack_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_attack_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_attack_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_attack_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_type_resistance_reduction		value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_critical_damage_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_damage_type_multiplicator		value = 0 }
	set_variable = { which = th_danmaku_duel_action_1_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_2_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_attack_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_attack_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_attack_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_attack_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_type_resistance_reduction		value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_critical_damage_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_damage_type_multiplicator		value = 0 }
	set_variable = { which = th_danmaku_duel_action_2_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_3_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_attack_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_attack_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_attack_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_attack_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_type_resistance_reduction		value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_critical_damage_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_damage_type_multiplicator		value = 0 }
	set_variable = { which = th_danmaku_duel_action_3_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_4_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_attack_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_attack_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_attack_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_attack_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_type_resistance_reduction		value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_critical_damage_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_damage_type_multiplicator		value = 0 }
	set_variable = { which = th_danmaku_duel_action_4_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_5_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_attack_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_attack_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_attack_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_attack_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_type_resistance_reduction		value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_critical_damage_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_damage_type_multiplicator		value = 0 }
	set_variable = { which = th_danmaku_duel_action_5_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_6_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_attack_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_attack_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_attack_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_attack_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_critical_damage_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_damage_type_multiplicator		value = 0 }
	set_variable = { which = th_danmaku_duel_action_6_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_7_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_attack_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_attack_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_attack_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_attack_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_type_resistance_reduction		value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_critical_damage_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_damage_type_multiplicator		value = 0 }
	set_variable = { which = th_danmaku_duel_action_7_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_8_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_attack_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_attack_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_attack_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_attack_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_type_resistance_reduction		value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_critical_damage_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_damage_type_multiplicator		value = 0 }
	set_variable = { which = th_danmaku_duel_action_8_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_9_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_attack_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_attack_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_attack_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_attack_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_type_resistance_reduction		value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_critical_damage_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_damage_type_multiplicator		value = 0 }
	set_variable = { which = th_danmaku_duel_action_9_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_10_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_attack_die_amount			value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_attack_die_result			value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_attack_die_bonus_per_roll	value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_attack_die_flat_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_type_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_critical_damage_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_damage_type_multiplicator	value = 0 }
	set_variable = { which = th_danmaku_duel_action_10_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_11_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_attack_die_amount			value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_attack_die_result			value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_attack_die_bonus_per_roll	value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_attack_die_flat_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_type_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_critical_damage_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_damage_type_multiplicator	value = 0 }
	set_variable = { which = th_danmaku_duel_action_11_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_12_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_attack_die_amount			value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_attack_die_result			value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_attack_die_bonus_per_roll	value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_attack_die_flat_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_type_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_critical_damage_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_damage_type_multiplicator	value = 0 }
	set_variable = { which = th_danmaku_duel_action_12_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_13_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_attack_die_amount			value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_attack_die_result			value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_attack_die_bonus_per_roll	value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_attack_die_flat_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_type_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_critical_damage_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_damage_type_multiplicator	value = 0 }
	set_variable = { which = th_danmaku_duel_action_13_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_14_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_attack_die_amount			value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_attack_die_result			value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_attack_die_bonus_per_roll	value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_attack_die_flat_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_type_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_critical_damage_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_damage_type_multiplicator	value = 0 }
	set_variable = { which = th_danmaku_duel_action_14_damage_school_multiplicator	value = 0 }
	
	set_variable = { which = th_danmaku_duel_action_15_value 						value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_hit_die						value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_hit_die_amount				value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_hit_die_result				value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_enemy_ac						value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_hit_die_flat_bonus			value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_hit_die_bonus_per_roll		value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_attack_die					value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_attack_die_amount			value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_attack_die_result			value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_attack_die_bonus_per_roll	value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_attack_die_flat_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_resistance_reduction			value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_type_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_school_resistance_reduction	value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_critical_damage_bonus		value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_damage_type_multiplicator	value = 0 }
	set_variable = { which = th_danmaku_duel_action_15_damage_school_multiplicator	value = 0 }
}