#Rules
th_has_danmaku_gold_gain_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_gold_gain_active_tt
		1 = { is_variable_equal = { which = th_danmaku_default_gold_gain_activated value = 1 } }
	}
}
th_has_NOT_danmaku_gold_gain_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_NOT_danmaku_gold_gain_active_tt
		1 = { is_variable_equal = { which = th_danmaku_default_gold_gain_activated value = 0 } }
	}
}
th_has_danmaku_gold_gain_scale_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_gold_gain_scale_active_tt
		1 = { is_variable_equal = { which = th_danmaku_default_gold_reward_scale_active value = 1 } }
	}
}
th_has_NOT_danmaku_gold_gain_scale_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_NOT_danmaku_gold_gain_scale_active_tt
		1 = { is_variable_equal = { which = th_danmaku_default_gold_reward_scale_active value = 0 } }
	}
}
th_has_danmaku_power_gain_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_power_gain_active_tt
		1 = { is_variable_equal = { which = th_danmaku_default_power_gain_activated value = 1 } }
	}
}
th_has_NOT_danmaku_power_gain_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_NOT_danmaku_power_gain_active_tt
		1 = { is_variable_equal = { which = th_danmaku_default_power_gain_activated value = 0 } }
	}
}
th_has_danmaku_gold_gain_scale_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_power_gain_scale_active_tt
		1 = { is_variable_equal = { which = th_danmaku_default_power_reward_scale_active value = 1 } }
	}
}
th_has_NOT_danmaku_power_gain_scale_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_NOT_danmaku_power_gain_scale_active_tt
		1 = { is_variable_equal = { which = th_danmaku_default_power_reward_scale_active value = 0 } }
	}
}


th_has_danmaku_power_gain_of_type_random = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_power_gain_of_type_random_tt
		1 = { is_variable_equal = { which = th_danmaku_default_power_type value = 0 } }
	}
}
th_has_danmaku_power_gain_of_type_adm = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_power_gain_of_type_adm_tt
		1 = { is_variable_equal = { which = th_danmaku_default_power_type value = 1 } }
	}
}
th_has_danmaku_power_gain_of_type_dip = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_power_gain_of_type_dip_tt
		1 = { is_variable_equal = { which = th_danmaku_default_power_type value = 2 } }
	}
}
th_has_danmaku_power_gain_of_type_mil = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_power_gain_of_type_mil_tt
		1 = { is_variable_equal = { which = th_danmaku_default_power_type value = 3 } }
	}
}
th_has_danmaku_power_gain_of_type_all = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_power_gain_of_type_all_tt
		1 = { is_variable_equal = { which = th_danmaku_default_power_type value = 4 } }
	}
}
th_has_danmaku_power_gain_of_type = {
	th_has_danmaku_power_gain_of_type_$type$ = yes
}

th_has_danmaku_ruler_death_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_ruler_death_active_tt
		1 = { is_variable_equal = { which = th_danmaku_default_setting_ruler_death value = 1 } }
	}
}
th_has_NOT_danmaku_ruler_death_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_NOT_danmaku_ruler_death_active_tt
		1 = { is_variable_equal = { which = th_danmaku_default_setting_ruler_death value = 0 } }
	}
}

th_has_danmaku_critical_strike_active = {
	custom_trigger_tooltip = {
		tooltip = th_has_danmaku_critical_strike_active_tt
		1 = { check_variable = { which = th_danmaku_default_crit_damage_multiplier value = 0 } }
	}
}


#Supports the following rulers
# reimu: "Reimu Hakurei"
# marisa: "Marisa Kirisame"
# mima: "Mima"
# konngara: "Konngara"
# sariel: "Sariel"
# rika: "Rika"
# meira: "Meira"
# kana: "Kana Anaberal"
# kotohime: "Kotohime"
# ellen: "Ellen"
# rikako: "Rikako Asakura"
# chiyuri: "Chiyuri Kitashirakawa"
# yumemi: "Yumemi Okazaki"
# kurumi: "Kurumi"
# elly: "Elly"
# gengetsu: "Gengetsu"
# mugetsu: "Mugetsu"
# yuuka: "Yuuka Kazami"
# alice: "Alice Margatroid"
# yuki: "Yuki"
# mai: "Mai"
# yumeko: "Yumeko"
# shinki: "Shinki"
# rumia: "Rumia"
# cirno: "Cirno"
# daiyousei: "Daiyousei"
# meiling: "Meiling Hong"
# koakuma: "Koakuma"
# patchouli: "Patchouli Knowledge"
# sakuya: "Sakuya Izayoi"
# remilia: "Remilia Scarlet"
# flandre: "Flandre Scarlet"
# satsuki: "Rin Satsuki"
# letty: "Letty Whiterock"
# chen: "Chen"
# lily: "Lily White"
# prismriver: "the Prismriver Sisters"
# lunasa: "Lunasa Prismriver"
# merlin: "Merlin Prismriver"
# lyrica: "Lyrica Prismriver"
# layla: "Layla Prismriver"
# youmu: "Youmu Konpaku"
# youki: "Youki Konpaku"
# yuyuko: "Yuyuko Saigyouji"
# ran: "Ran Yakumo"
# yukari: "Yukari Yakumo"
# suika: "Suika Ibuki"
# wriggle: "Wriggle Nightbug"
# mystia: "Mystia Lorelei"
# keine: "Keine Kamishirasawa"
# tewi: "Tewi Inaba"
# reisen: "Reisen Udongein Inaba"
# eirin: "Eirin Yagokoro"
# kaguya: "Kaguya Houraisan"
# mokou: "Mokou Fujiwara"
# aya: "Aya Shameimaru"
# medicine: "Medicine Melancholy"
# komachi: "Komachi Onozuka"
# eiki: "Eiki Shiki"
# shizuha: "Shizuha Aki"
# minoriko: "Minoriko Aki"
# hina: "Hina Kagiyama"
# nitori: "Nitori Kawashiro"
# momiji: "Momiji Inubashiri"
# sanae: "Sanae Kochiya"
# kanako: "Kanako Yasaka"
# suwako: "Suwako Moriya"
# iku: "Iku Nagae"
# tenshi: "Tenshi Hinanawi"
# kisume: "Kisume"
# yamame: "Yamame Kurodani"
# parsee: "Parsee Mizuhashi"
# yuugi: "Yuugi Hoshiguma"
# satori: "Satori Komeiji"
# orin: "Kaenbyou Rin"
# okuu: "Utsuho Reiuji"
# koishi: "Koishi Komeiji"
# nazrin: "Nazrin"
# kogasa: "Kogasa Tatara"
# ichirin: "Ichirin Kumoi"
# minamitsu: "Minamitsu Murasa"
# shou: "Shou Toramaru"
# byakuren: "Byakuren Hijiri"
# nue: "Nue Houjuu"
# hatate: "Hatate Himekaidou"
# kyouko: "Kyouko Kasodani"
# yoshika: "Yoshika Miyako"
# seiga: "Seiga Kaku"
# tojiko: "Tojiko Soga"
# futo: "Futo Mononobe"
# miko: "Miko Toyosatomimi"
# mamizou: "Mamizou Futatsuiwa"
# kokoro: "Kokoro Hata"
# wakasagihime: "Wakasagihime"
# sekibanki: "Sekibanki Nukekubi"
# kagerou: "Kagerou Imaizumi"
# benben: "Benben Tsukumo"
# yatsuhashi: "Yatsuhashi Tsukumo"
# seija: "Seija Kijin"
# shinmyoumaru: "Shinmyoumaru Sukuna"
# raiko: "Raiko Horikawa"
# sumireko: "Sumireko Usami"
# renko: "Renko Usami"
# maribel: "Marbiel Hern"
# seiran: "Seiran"
# ringo: "Ringo"
# doremy: "Doremy Sweet"
# sagune: "Sagume Kishin"
# clownpiece: "Clownpiece"
# junko: "Junko"
# hecatia: "Hecatia Lapislazuli"
# toyohime: "Toyohime Watatsuki"
# yorihime: "Yorihime Watatsuki"
# change: "Chang'e"
# reisen_moon: "Rei'sen"
# joon: "Joon Yorigami"
# shion: "Shion Yorigami"
# sunny: "Sunny Milk"
# star: "Star Sapphire"
# luna: "Luna Child"
# kasen: "Kasen Ibaraki"
# larva: "Eternity Larva"
# nemuno: "Nemuno Sakata"
# aunn: "Aunn Komano"
# narumi: "Narumi Yatadera"
# teireida: "Mai Teireida"
# satonono: "Satono Nishida"
# okina: "Okina Matara"
# eika: "Eika Ebisu"
# urumi: "Urumi Ushizaki"
# kutaka: "Kutaka Niwatari"
# mayumi: "Mayumi Joutouguu"
# keiki: "Keiki Haniyasushin"
# yachie: "Yachie Kitcho"
# saki: "Saki Kurukoma"
# yuuma: "Yuuma Toutetsu"
# mike: "Mike Goutokuji"
# takane: "Takane Yamashiro"
# sannyo: "Sannyo Komakusa"
# misumaru: "Misumaru Tamatsukuri"
# tsukasa: "Tsukasa Kudamaki"
# megumu: "Megumu Iizunamaru"
# chimata: "Chimata Tenkyuu"
# momoyo: "Momoyo Himemushi"
# son: "Son Biten"
# enoko: "Enoko Mitsugashira"
# chiyari: "Chiyari Tenkajin"
# hisami: "Hisami Yomotsu"
# zanmu: "Zanmu Nippaku"
# rinnosuke: "Rinnosuke Morichika"
# tokiko: "Tokiko"
# miyoi: "Miyoi Okunoda"
# mizuchi: "Mizuchi Miyadeguchi"
# zun: "ZUN"
th_has_danmaku_ruler = {
	has_ruler_flag = th_danmaku_ruler_$who$
}

#Supports the following classes
# commoner
# barbarian
# warrior
# rogue
# ranger
# bard
# monk
# paladin
# cleric
# priest
# druid
# sorcerer
# warlock
# mage
# artificer
th_is_danmaku_class = {
	has_ruler_flag = th_danmaku_class_$class$
}
th_unlanded_character_is_danmaku_class = {
	has_country_flag = th_danmaku_enemy_danmaku_character_class_$class$
}

#Supports the following creature types
# human
# fairy
# vampire
# god
# demigod
# immortal
# undead
# half_phantom
# half_youkai
# youkai
# yama
# hermit
# lunarian
# oni
# demon
# devil
# tengu
# kappa
# tsukumogami
# yamanba
# nue
# satori
# angel
# shinigami
# inchling
# doll
# robot
# celestial
th_is_danmaku_creature_type = {
	has_ruler_flag = th_danmaku_creature_type_$type$
}

th_is_danmaku_level = {
	check_variable = {
		which = th_ruler_danmaku_level
		value = $level$
	}
}

#GUI stuff
th_has_danmaku_hp_set = { 				OR = { check_variable = { which = th_danmaku_health value = 0.01 } 					NOT = { check_variable = { which = th_danmaku_health value = 0 } } } }
th_has_danmaku_max_hp_set = { 			OR = { check_variable = { which = th_danmaku_max_health value = 0.01 } 				NOT = { check_variable = { which = th_danmaku_max_health value = 0 } } } }
th_has_danmaku_mp_set = { 				OR = { check_variable = { which = th_danmaku_mana value = 0.01 } 					NOT = { check_variable = { which = th_danmaku_mana value = 0 } } } }
th_has_danmaku_max_mp_set = { 			OR = { check_variable = { which = th_danmaku_max_mana value = 0.01 }				NOT = { check_variable = { which = th_danmaku_max_mana value = 0 } } } }
th_has_danmaku_ap_set = { 				OR = { check_variable = { which = th_danmaku_action_points value = 0.01 } 			NOT = { check_variable = { which = th_danmaku_action_points value = 0 } } } }
th_has_danmaku_max_ap_set = { 			OR = { check_variable = { which = th_danmaku_max_action_points value = 0.01 }		NOT = { check_variable = { which = th_danmaku_max_action_points value = 0 } } } }
th_has_danmaku_exp_set = { 				OR = { check_variable = { which = th_danmaku_current_exp value = 0.01 } 			NOT = { check_variable = { which = th_danmaku_current_exp value = 0 } } } }
th_has_danmaku_max_exp_set = { 			OR = { check_variable = { which = th_danmaku_exp_threshold value = 0.01 }			NOT = { check_variable = { which = th_danmaku_exp_threshold value = 0 } } } }
th_has_danmaku_hpm_set = {				OR = { check_variable = { which = th_danmaku_hpm value = 0.01 }						NOT = { check_variable = { which = th_danmaku_hpm value = 0 } } } }
th_has_danmaku_mpm_set = {				OR = { check_variable = { which = th_danmaku_mpm value = 0.01 }						NOT = { check_variable = { which = th_danmaku_mpm value = 0 } } } }
th_has_danmaku_ini_bonus_set = {		OR = { check_variable = { which = th_danmaku_ini_bonus value = 0.01 }				NOT = { check_variable = { which = th_danmaku_ini_bonus value = 0 } } } }
th_has_danmaku_hit_bonus_set = {		OR = { check_variable = { which = th_danmaku_hit_bonus value = 0.01 }				NOT = { check_variable = { which = th_danmaku_hit_bonus value = 0 } } } }
th_has_danmaku_attack_bonus_set = {		OR = { check_variable = { which = th_danmaku_physical_attack_bonus value = 0.01 }			NOT = { check_variable = { which = th_danmaku_physical_attack_bonus value = 0 } } } }
th_has_danmaku_attack_die_set = {		OR = { check_variable = { which = th_danmaku_physical_attack_die value = 0.01 }				NOT = { check_variable = { which = th_danmaku_physical_attack_die value = 0 } } } }
th_has_danmaku_attack_die_num_set = {	OR = { check_variable = { which = th_danmaku_physical_attack_die_num value = 0.01 }			NOT = { check_variable = { which = th_danmaku_physical_attack_die_num value = 0 } } }	 }
th_has_danmaku_crit_roll_needed_set = {	OR = { check_variable = { which = th_danmaku_physical_crit_roll_needed value = 0.01 }		NOT = { check_variable = { which = th_danmaku_physical_crit_roll_needed value = 0 } } }	 }
th_has_danmaku_armor_class_set = {		OR = { check_variable = { which = th_danmaku_armor_class value = 0.01 }				NOT = { check_variable = { which = th_danmaku_armor_class value = 0 } } } }
th_has_danmaku_resistance_set = {		OR = { check_variable = { which = th_danmaku_resistance value = 0.01 }				NOT = { check_variable = { which = th_danmaku_resistance value = 0 } } } }
th_has_danmaku_gold_gain_set = {		OR = { check_variable = { which = th_danmaku_gold_gain value = 0.01 }				NOT = { check_variable = { which = th_danmaku_gold_gain value = 0 } } } }
th_has_danmaku_power_gain_set = {		OR = { check_variable = { which = th_danmaku_power_gain value = 0.01 }				NOT = { check_variable = { which = th_danmaku_power_gain value = 0 } } } }
th_has_danmaku_skill_points_set = {		OR = { check_variable = { which = th_danmaku_available_skill_points value = 0.01 }	NOT = { check_variable = { which = th_danmaku_available_skill_points value = 0 } } } }
#Global GUI stuff
th_has_danmaku_default_initiative_die_num_set = { 1 = { check_variable = { which = th_danmaku_default_initiative_die_num value = 1 } } }
th_has_danmaku_default_initiative_die_set = { 1 = { check_variable = { which = th_danmaku_default_initiative_die value = 1 } } }
th_has_danmaku_default_hit_die_num_set = { 1 = { check_variable = { which = th_danmaku_default_hit_die_num value = 1 } } }
th_has_danmaku_default_hit_die_set = { 1 = { check_variable = { which = th_danmaku_default_hit_die value = 1 } } }
th_has_danmaku_default_crit_die_num_set = { 1 = { check_variable = { which = th_danmaku_default_crit_die_num value = 1 } } }
th_has_danmaku_default_crit_die_set = { 1 = { check_variable = { which = th_danmaku_default_crit_die value = 1 } } }
th_danmaku_default_skill_points_per_level_set = { 1 = { check_variable = { which = th_danmaku_default_skill_points_per_level value = 1 } } }
th_danmaku_default_skill_points_cost_set = { 1 = { check_variable = { which = th_danmaku_default_skill_points_cost value = 1 } } }

th_danmaku_ini_bonus_positive = { check_variable = { which = th_danmaku_ini_bonus value = 1 } }
th_danmaku_ini_bonus_negative = { NOT = { check_variable = { which = th_danmaku_ini_bonus value = 0 } } }
th_danmaku_hit_bonus_positive = { check_variable = { which = th_danmaku_hit_bonus value = 1 } }
th_danmaku_hit_bonus_negative = { NOT = { check_variable = { which = th_danmaku_hit_bonus value = 0 } } }
th_danmaku_physical_attack_bonus_positive = { check_variable = { which = th_danmaku_physical_attack_bonus value = 1 } }
th_danmaku_physical_attack_bonus_negative = { NOT = { check_variable = { which = th_danmaku_physical_attack_bonus value = 0 } } }
th_danmaku_armor_class_is_above_defines = { 1 = { PREV = { NOT = { check_variable = { which = th_danmaku_armor_class which = PREV } } } } }
th_danmaku_armor_class_is_below_defines = { 1 = { PREV = { check_variable = { which = th_danmaku_armor_class which = PREV } NOT = { is_variable_equal = { which = th_danmaku_armor_class which = PREV } } } } }
th_danmaku_crit_needed_is_below_defines = { 1 = { PREV = { NOT = { check_variable = { which = th_danmaku_physical_crit_roll_needed which = PREV } } } } }
th_danmaku_crit_needed_is_above_defines = { 1 = { PREV = { check_variable = { which = th_danmaku_physical_crit_roll_needed which = PREV } NOT = { is_variable_equal = { which = th_danmaku_physical_crit_roll_needed which = PREV } } } } }

th_danmaku_has_positive_hpm = { check_variable = { which = th_danmaku_hpm value = 0.01 } }
th_danmaku_has_negative_hpm = { NOT = { check_variable = { which = th_danmaku_hpm value = 0 } } }
th_danmaku_has_positive_mpm = { check_variable = { which = th_danmaku_mpm value = 0.01 } }
th_danmaku_has_negative_mpm = { NOT = { check_variable = { which = th_danmaku_mpm value = 0 } } }
th_danmaku_has_positive_resistance = { check_variable = { which = th_danmaku_resistance value = 0.01 } }
th_danmaku_has_negative_resistance = { NOT = { check_variable = { which = th_danmaku_resistance value = 0 } } }
th_danmaku_has_positive_gold_gain = { check_variable = { which = th_danmaku_gold_gain value = 0.01 } }
th_danmaku_has_negative_gold_gain = { NOT = { check_variable = { which = th_danmaku_gold_gain value = 0 } } }
th_danmaku_has_positive_power_gain = { check_variable = { which = th_danmaku_power_gain value = 0.01 } }
th_danmaku_has_negative_power_gain = { NOT = { check_variable = { which = th_danmaku_power_gain value = 0 } } }

th_ability_has_any_cost = {
	OR = {
		NOT = { is_variable_equal = { which = th_ability_$ability$_ap_cost_override value = 0 } }
		NOT = { is_variable_equal = { which = th_ability_$ability$_mp_cost_override value = 0 } }
		NOT = { is_variable_equal = { which = th_ability_$ability$_hp_cost_override value = 0 } }
		1 = {
			OR = {
				NOT = { is_variable_equal = { which = th_ability_$ability$_ap_cost value = 0 } }
				NOT = { is_variable_equal = { which = th_ability_$ability$_mp_cost value = 0 } }
				NOT = { is_variable_equal = { which = th_ability_$ability$_hp_cost value = 0 } }
			}
		}
	}
}

th_ability_has_cost_default = {
	1 = {
		NOT = {
			is_variable_equal = {
				which = th_ability_$ability$_$type$_cost
				value = 0
			}
		}
	}
}
th_ability_has_cost_override = {
	NOT = {
		is_variable_equal = {
			which = th_ability_$ability$_$type$_cost_override
			value = 0
		}
	}
}
th_ability_has_cost = {
	th_ability_has_cost_$mode$ = { ability = $ability$ type = $type$ }
}

th_weapon_has_rarity = {
	OR = {
		AND = {
			has_country_flag = th_weapon_override_$weapon$_rarity
			is_variable_equal = {
				which = th_weapon_$weapon$_new_rarity
				value = $rarity$
			}
		}
		AND = {
			NOT = { has_country_flag = th_weapon_override_$weapon$_rarity }
			1 = {
				is_variable_equal = {
					which = th_weapon_iron_sword_default_rarity
					value = $rarity$
				}
			}
		}
	}
}

th_weapon_has_modified_cost = {
	check_variable = {
		which = th_weapon_$weapon$_gold_override
		value = 0.01
	}
}

th_weapon_is_of_damage_type = {
	1 = {
		has_province_flag = th_weapon_iron_sword_damage_type_$type$
	}
}
th_weapon_is_of_damage_school = {
	1 = {
		has_province_flag = th_weapon_iron_sword_damage_school_$school$
	}
}

th_gui_current_page_items_collection = {
	is_variable_equal = {
		which = th_gui_$items$_page
		value = $page$
	}
}

th_gui_current_page_is_higher_items_collection = {
	check_variable = {
		which = th_gui_$items$_page
		value = $page$
	}
}

th_gui_current_page_is_smaller_items_collection = {
	NOT = {
		check_variable = {
			which = th_gui_$items$_page
			value = $page$
		}
	}
}

th_gui_has_selected_item_type = {
	has_country_flag = th_has_selcted_item_of_$type$
}
th_gui_has_not_selected_item_type = {
	NOT = { has_country_flag = th_has_selcted_item_of_$type$ }
}
th_gui_has_selected_item = {
	th_gui_has_selected_item_type = { type = $type$ }
	has_country_flag = th_selected_$type$_$item$
}
th_gui_has_selected_weapon = {
	th_gui_has_selected_item = { type = weapon item = $item$ }
}

th_has_equipped_item = {
	has_country_flag = th_danmaku_has_equipped_$type$_$item$
}
th_has_not_equipped_item = {
	NOT = { has_country_flag = th_danmaku_has_equipped_$type$_$item$ }
}