namespace = fairy_elections

# Election!
country_event = {
	id = fairy_elections.1
	title = "EVTNAME700"
	picture = FAIRYCOURT_eventPicture
	desc = fairy_elections.1.desc
	
	is_triggered_only = yes
	
	trigger = {
		has_reform = Gensokyan_republic_fairy_government
	}
	
	immediate = {
		hidden_effect = {
			define_exiled_ruler = {
				exiled_as = lottery_candidate_a_@ROOT
				name = "Daiyousei"
				dynasty = "of Cirnia"
				min_age = 60
				max_age = 65
				adm = 5
				dip = 3
				mil = 3
				fixed = yes
				female = yes
				option = 0
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_b_@ROOT
				name = "Lily"
				dynasty = "White"
				min_age = 60
				max_age = 65
				adm = 3
				dip = 5
				mil = 3
				fixed = yes
				female = yes
				option = 1
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_c_@ROOT
				name = "Cirno"
				dynasty = "of Cirnia"
				min_age = 60
				max_age = 65
				adm = 3
				dip = 3
				mil = 5
				fixed = yes
				female = yes
				option = 2
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_d_@ROOT
				name = "Clownpiece"
				dynasty = "Hell Fairy"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 1
				mil = 6
				fixed = yes
				female = yes
				option = 3
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_e_@ROOT
				name = "Sunny"
				dynasty = "Milk"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 3
				mil = 4
				fixed = yes
				female = yes
				option = 4
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_f_@ROOT
				name = "Star"
				dynasty = "Sapphire"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 4
				mil = 3
				fixed = yes
				female = yes
				option = 5
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_g_@ROOT
				name = "Luna"
				dynasty = "Child"
				min_age = 60
				max_age = 65
				adm = 5
				dip = 2
				mil = 4
				fixed = yes
				female = yes
				option = 6
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_h_@ROOT
				name = "Eternity"
				dynasty = "Larva"
				min_age = 60
				max_age = 65
				adm = 2
				dip = 6
				mil = 3
				fixed = yes
				female = yes
				option = 7
			}
		}
	}

	after = {
		clr_country_flag = caretaker_revolutionary_government
		clear_exiled_ruler = lottery_candidate_a_@ROOT
		clear_exiled_ruler = lottery_candidate_b_@ROOT
		clear_exiled_ruler = lottery_candidate_c_@ROOT
		clear_exiled_ruler = lottery_candidate_d_@ROOT
		clear_exiled_ruler = lottery_candidate_e_@ROOT
		clear_exiled_ruler = lottery_candidate_f_@ROOT
		clear_exiled_ruler = lottery_candidate_g_@ROOT
		clear_exiled_ruler = lottery_candidate_h_@ROOT
	}

	option = {
		name = "EVTOPTA700"	# Current ruler stays
		trigger = {
			has_regency = no
			NOT = { has_ruler_flag = leader_has_been_pushed_out }
		}
		ai_chance = { 
			factor = 60
			modifier = {
				factor = 0
				NOT = { republican_tradition = 25 }
			}	
			modifier = {
				factor = 0.5
				NOT = { republican_tradition = 50 }
			}				
			modifier = {
				factor = 0.5
				NOT = { republican_tradition = 75 }
			}	
			modifier = {
				factor = 2.0
				republican_tradition = 90
			}		
		}
		custom_tooltip = remains_ruler
		change_adm = 1
		change_dip = 1
		change_mil = 1
		if = {
			limit = {
				has_country_flag = strengthened_signoria_flag
			}
			custom_tooltip = strengthened_signoria_election_tt
			clr_country_flag = strengthened_signoria_flag
		}
		else = {
			add_scaled_republican_tradition = -10
		}
		random_list = {
			10 = {
				add_adm_power = 50
			}
			10 = {
				add_dip_power = 50
			}
			10 = {
				add_mil_power = 50
			}
		}
		add_karma = -5
	}
	#TOUHOU
	
	option = {	#Choose Daiyousei
		trigger = {
			NOT = { has_ruler_flag = th_fairy_repub_daiyousei }
		}
		name = fairy_elections.1.a
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_a_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_daiyousei
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Lily
		name = fairy_elections.1.b
		trigger = {
			NOT = { has_ruler_flag = th_fairy_repub_lily }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_b_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_lily
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Cirno
		name = fairy_elections.1.c
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_cirno }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_c_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_cirno
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Clownpiece
		name = fairy_elections.1.d
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_clownpiece }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_d_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_clownpiece
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Sunny Milk
		name = fairy_elections.1.e
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_sunny }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_e_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_sunny
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Star Sapphire
		name = fairy_elections.1.f
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_star }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_f_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_star
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Luna Child
		name = fairy_elections.1.g
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_luna }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_g_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_luna
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Eternity Larva
		name = fairy_elections.1.h
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_eternity }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_h_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_eternity
		}
		add_republican_tradition = -10
	}
	option = { # lottery
		name = fairy_elections.1.i
		ai_chance = {
			factor = 90
		}
		random_list = {
			12.5 = { 
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_daiyousei
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {					
					set_ruler = lottery_candidate_a_@ROOT
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_daiyousei
					}
				}
			}
			12.5 = { 
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_lily
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_b_@ROOT
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_lily
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_cirno
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_c_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_cirno
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_clownpiece
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_d_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_clownpiece
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_sunny
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_e_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_sunny
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_star
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_f_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_star
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_luna
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_g_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_luna
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_eternity
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_h_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_eternity
					}
				}
			}
		}
		add_republican_tradition = 5
		add_karma = 10
	}
}

# Election!
country_event = {
	id = fairy_elections.2
	title = "EVTNAME700"
	picture = FAIRYCOURT_eventPicture
	desc = fairy_elections.2.desc
	
	is_triggered_only = yes
	
	trigger = {
		has_reform = Gensokyan_republic_fairy_government
	}
	
	immediate = {
		hidden_effect = {
			define_exiled_ruler = {
				exiled_as = lottery_candidate_a_@ROOT
				name = "Daiyousei"
				dynasty = "of Cirnia"
				min_age = 60
				max_age = 65
				adm = 5
				dip = 3
				mil = 3
				fixed = yes
				female = yes
				option = 0
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_b_@ROOT
				name = "Lily"
				dynasty = "White"
				min_age = 60
				max_age = 65
				adm = 3
				dip = 5
				mil = 3
				fixed = yes
				female = yes
				option = 1
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_c_@ROOT
				name = "Cirno"
				dynasty = "of Cirnia"
				min_age = 60
				max_age = 65
				adm = 3
				dip = 3
				mil = 5
				fixed = yes
				female = yes
				option = 2
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_d_@ROOT
				name = "Clownpiece"
				dynasty = "Hell Fairy"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 1
				mil = 6
				fixed = yes
				female = yes
				option = 3
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_e_@ROOT
				name = "Sunny"
				dynasty = "Milk"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 3
				mil = 4
				fixed = yes
				female = yes
				option = 4
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_f_@ROOT
				name = "Star"
				dynasty = "Sapphire"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 4
				mil = 3
				fixed = yes
				female = yes
				option = 5
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_g_@ROOT
				name = "Luna"
				dynasty = "Child"
				min_age = 60
				max_age = 65
				adm = 5
				dip = 2
				mil = 4
				fixed = yes
				female = yes
				option = 6
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_h_@ROOT
				name = "Eternity"
				dynasty = "Larva"
				min_age = 60
				max_age = 65
				adm = 2
				dip = 6
				mil = 3
				fixed = yes
				female = yes
				option = 7
			}
		}
	}
	
	after = {
		clear_exiled_ruler = lottery_candidate_a_@ROOT
		clear_exiled_ruler = lottery_candidate_b_@ROOT
		clear_exiled_ruler = lottery_candidate_c_@ROOT
		clear_exiled_ruler = lottery_candidate_d_@ROOT
		clear_exiled_ruler = lottery_candidate_e_@ROOT
		clear_exiled_ruler = lottery_candidate_f_@ROOT
		clear_exiled_ruler = lottery_candidate_g_@ROOT
		clear_exiled_ruler = lottery_candidate_h_@ROOT
	}

	#TOUHOU
	
	option = {	#Choose Daiyousei
		name = fairy_elections.1.a
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_a_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_daiyousei
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Lily
		name = fairy_elections.1.b
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_b_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_lily
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Cirno
		name = fairy_elections.1.c
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_c_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_cirno
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Clownpiece
		name = fairy_elections.1.d
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_d_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_clownpiece
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Sunny Milk
		name = fairy_elections.1.e
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_e_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_sunny
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Star Sapphire
		name = fairy_elections.1.f
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_f_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_star
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Luna Child
		name = fairy_elections.1.g
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_g_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_luna
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Eternity Larva
		name = fairy_elections.1.h
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_h_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_eternity
		}
		add_republican_tradition = -10
	}
	option = { # lottery
		name = fairy_elections.1.i
		ai_chance = {
			factor = 90
		}
		random_list = {
			12.5 = { 
				set_ruler = lottery_candidate_a_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_daiyousei
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_b_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_lily
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_c_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_cirno
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_d_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_clownpiece
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_e_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_sunny
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_f_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_star
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_g_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_luna
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_h_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_eternity
				}
			}
		}
		add_karma = 10
	}
}

# Pirate Election!
country_event = {
	id = fairy_elections.3
	title = "EVTNAME700"
	picture = FAIRYCOURT_eventPicture
	desc = fairy_elections.1.desc
	
	is_triggered_only = yes
	
	trigger = {
		has_reform = Gensokyan_tfr_pirate_government
	}
	
	immediate = {
		hidden_effect = {
			define_exiled_ruler = {
				exiled_as = lottery_candidate_a_@ROOT
				name = "Daiyousei"
				dynasty = "of Cirnia"
				min_age = 60
				max_age = 65
				adm = 5
				dip = 3
				mil = 3
				fixed = yes
				female = yes
				option = 0
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_b_@ROOT
				name = "Lily"
				dynasty = "White"
				min_age = 60
				max_age = 65
				adm = 3
				dip = 5
				mil = 3
				fixed = yes
				female = yes
				option = 1
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_c_@ROOT
				name = "Cirno"
				dynasty = "of Cirnia"
				min_age = 60
				max_age = 65
				adm = 3
				dip = 3
				mil = 5
				fixed = yes
				female = yes
				option = 2
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_d_@ROOT
				name = "Clownpiece"
				dynasty = "Hell Fairy"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 1
				mil = 6
				fixed = yes
				female = yes
				option = 3
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_e_@ROOT
				name = "Sunny"
				dynasty = "Milk"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 3
				mil = 4
				fixed = yes
				female = yes
				option = 4
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_f_@ROOT
				name = "Star"
				dynasty = "Sapphire"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 4
				mil = 3
				fixed = yes
				female = yes
				option = 5
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_g_@ROOT
				name = "Luna"
				dynasty = "Child"
				min_age = 60
				max_age = 65
				adm = 5
				dip = 2
				mil = 4
				fixed = yes
				female = yes
				option = 6
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_h_@ROOT
				name = "Eternity"
				dynasty = "Larva"
				min_age = 60
				max_age = 65
				adm = 2
				dip = 6
				mil = 3
				fixed = yes
				female = yes
				option = 7
			}
		}
	}

	after = {
		clr_country_flag = caretaker_revolutionary_government
		clear_exiled_ruler = lottery_candidate_a_@ROOT
		clear_exiled_ruler = lottery_candidate_b_@ROOT
		clear_exiled_ruler = lottery_candidate_c_@ROOT
		clear_exiled_ruler = lottery_candidate_d_@ROOT
		clear_exiled_ruler = lottery_candidate_e_@ROOT
		clear_exiled_ruler = lottery_candidate_f_@ROOT
		clear_exiled_ruler = lottery_candidate_g_@ROOT
		clear_exiled_ruler = lottery_candidate_h_@ROOT
	}

	option = {
		name = "EVTOPTA700"	# Current ruler stays
		trigger = {
			has_regency = no
			NOT = { has_ruler_flag = leader_has_been_pushed_out }
		}
		ai_chance = { 
			factor = 60
			modifier = {
				factor = 0
				NOT = { republican_tradition = 25 }
			}	
			modifier = {
				factor = 0.5
				NOT = { republican_tradition = 50 }
			}				
			modifier = {
				factor = 0.5
				NOT = { republican_tradition = 75 }
			}	
			modifier = {
				factor = 2.0
				republican_tradition = 90
			}		
		}
		custom_tooltip = remains_ruler
		change_adm = 1
		change_dip = 1
		change_mil = 1
		if = {
			limit = {
				has_country_flag = strengthened_signoria_flag
			}
			custom_tooltip = strengthened_signoria_election_tt
			clr_country_flag = strengthened_signoria_flag
		}
		else = {
			add_scaled_republican_tradition = -10
		}
		random_list = {
			10 = {
				add_adm_power = 50
			}
			10 = {
				add_dip_power = 50
			}
			10 = {
				add_mil_power = 50
			}
		}
		add_karma = -5
	}
	#TOUHOU
	
	option = {	#Choose Daiyousei
		trigger = {
			NOT = { has_ruler_flag = th_fairy_repub_daiyousei }
		}
		name = fairy_elections.1.a
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_a_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_daiyousei
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Lily
		name = fairy_elections.1.b
		trigger = {
			NOT = { has_ruler_flag = th_fairy_repub_lily }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_b_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_lily
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Cirno
		name = fairy_elections.1.c
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_cirno }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_c_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_cirno
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Clownpiece
		name = fairy_elections.1.d
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_clownpiece }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_d_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_clownpiece
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Sunny Milk
		name = fairy_elections.1.e
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_sunny }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_e_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_sunny
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Star Sapphire
		name = fairy_elections.1.f
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_star }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_f_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_star
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Luna Child
		name = fairy_elections.1.g
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_luna }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_g_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_luna
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Eternity Larva
		name = fairy_elections.1.h
		trigger = {			
			NOT = { has_ruler_flag = th_fairy_repub_eternity }
		}
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_h_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_eternity
		}
		add_republican_tradition = -10
	}
	option = { # lottery
		name = fairy_elections.1.i
		ai_chance = {
			factor = 90
		}
		random_list = {
			12.5 = { 
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_daiyousei
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {					
					set_ruler = lottery_candidate_a_@ROOT
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_daiyousei
					}
				}
			}
			12.5 = { 
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_lily
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_b_@ROOT
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_lily
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_cirno
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_c_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_cirno
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_clownpiece
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_d_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_clownpiece
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_sunny
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_e_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_sunny
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_star
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_f_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_star
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_luna
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_g_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_luna
					}
				}
			}
			12.5 = {
				if = {
					limit = {
						has_ruler_flag = th_fairy_repub_eternity
					}
					custom_tooltip = remains_ruler
					change_adm = 1
					change_dip = 1
					change_mil = 1
				}
				else = {	
					set_ruler = lottery_candidate_h_@ROOT 
					hidden_effect = { 
						add_ruler_personality = immortal_personality 
						th_add_random_ruler_personality_republic = yes
						th_add_random_ruler_personality_republic = yes
						set_ruler_flag = th_fairy_repub_eternity
					}
				}
			}
		}
		add_republican_tradition = 5
		add_karma = 10
	}
}

# Pirate Election!
country_event = {
	id = fairy_elections.4
	title = "EVTNAME700"
	picture = FAIRYCOURT_eventPicture
	desc = fairy_elections.2.desc
	
	is_triggered_only = yes
	
	trigger = {
		has_reform = Gensokyan_tfr_pirate_government
	}
	
	immediate = {
		hidden_effect = {
			define_exiled_ruler = {
				exiled_as = lottery_candidate_a_@ROOT
				name = "Daiyousei"
				dynasty = "of Cirnia"
				min_age = 60
				max_age = 65
				adm = 5
				dip = 3
				mil = 3
				fixed = yes
				female = yes
				option = 0
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_b_@ROOT
				name = "Lily"
				dynasty = "White"
				min_age = 60
				max_age = 65
				adm = 3
				dip = 5
				mil = 3
				fixed = yes
				female = yes
				option = 1
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_c_@ROOT
				name = "Cirno"
				dynasty = "of Cirnia"
				min_age = 60
				max_age = 65
				adm = 3
				dip = 3
				mil = 5
				fixed = yes
				female = yes
				option = 2
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_d_@ROOT
				name = "Clownpiece"
				dynasty = "Hell Fairy"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 1
				mil = 6
				fixed = yes
				female = yes
				option = 3
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_e_@ROOT
				name = "Sunny"
				dynasty = "Milk"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 3
				mil = 4
				fixed = yes
				female = yes
				option = 4
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_f_@ROOT
				name = "Star"
				dynasty = "Sapphire"
				min_age = 60
				max_age = 65
				adm = 4
				dip = 4
				mil = 3
				fixed = yes
				female = yes
				option = 5
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_g_@ROOT
				name = "Luna"
				dynasty = "Child"
				min_age = 60
				max_age = 65
				adm = 5
				dip = 2
				mil = 4
				fixed = yes
				female = yes
				option = 6
			}
			define_exiled_ruler = {
				exiled_as = lottery_candidate_h_@ROOT
				name = "Eternity"
				dynasty = "Larva"
				min_age = 60
				max_age = 65
				adm = 2
				dip = 6
				mil = 3
				fixed = yes
				female = yes
				option = 7
			}
		}
	}
	
	after = {
		clear_exiled_ruler = lottery_candidate_a_@ROOT
		clear_exiled_ruler = lottery_candidate_b_@ROOT
		clear_exiled_ruler = lottery_candidate_c_@ROOT
		clear_exiled_ruler = lottery_candidate_d_@ROOT
		clear_exiled_ruler = lottery_candidate_e_@ROOT
		clear_exiled_ruler = lottery_candidate_f_@ROOT
		clear_exiled_ruler = lottery_candidate_g_@ROOT
		clear_exiled_ruler = lottery_candidate_h_@ROOT
	}

	#TOUHOU
	
	option = {	#Choose Daiyousei
		name = fairy_elections.1.a
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_a_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_daiyousei
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Lily
		name = fairy_elections.1.b
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_b_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_lily
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Cirno
		name = fairy_elections.1.c
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_c_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_cirno
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Clownpiece
		name = fairy_elections.1.d
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_d_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_clownpiece
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Sunny Milk
		name = fairy_elections.1.e
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_e_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_sunny
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Star Sapphire
		name = fairy_elections.1.f
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_f_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_star
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Luna Child
		name = fairy_elections.1.g
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_g_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_luna
		}
		add_republican_tradition = -10
	}
	option = {	#Choose Eternity Larva
		name = fairy_elections.1.h
		ai_chance = {
			factor = 0
		}
		set_ruler = lottery_candidate_h_@ROOT
		hidden_effect = { 
			add_ruler_personality = immortal_personality 
			th_add_random_ruler_personality_republic = yes
			th_add_random_ruler_personality_republic = yes
			set_ruler_flag = th_fairy_repub_eternity
		}
		add_republican_tradition = -10
	}
	option = { # lottery
		name = fairy_elections.1.i
		ai_chance = {
			factor = 90
		}
		random_list = {
			12.5 = { 
				set_ruler = lottery_candidate_a_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_daiyousei
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_b_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_lily
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_c_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_cirno
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_d_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_clownpiece
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_e_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_sunny
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_f_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_star
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_g_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_luna
				}
			}
			12.5 = { 
				set_ruler = lottery_candidate_h_@ROOT
				hidden_effect = { 
					add_ruler_personality = immortal_personality 
					th_add_random_ruler_personality_republic = yes
					th_add_random_ruler_personality_republic = yes
					set_ruler_flag = th_fairy_repub_eternity
				}
			}
		}
		add_karma = 10
	}
}