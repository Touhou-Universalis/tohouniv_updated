########################################
# Flavor Events for Clownpiecia
########################################

namespace = flavor_clp

#
country_event = {	
	id = flavor_clp.1
	title = flavor_clp.1.t
	desc = flavor_clp.1.desc
	picture = JUNKO2_eventPicture
	
	is_triggered_only = yes
	
	option = {	
		name = flavor_clp.1.a
		
		JNK = { country_event = { id = flavor_clp.2 } }
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {	
	id = flavor_clp.2
	title = flavor_clp.2.t
	desc = flavor_clp.2.desc
	picture = JUNKO2_eventPicture
	
	is_triggered_only = yes
	
	major = yes
	
	option = {	
		name = flavor_clp.2.a
		
		From = { country_event = { id = flavor_clp.3 } }
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				From = { ai = yes }
			}
		}
	}
	option = {	
		name = flavor_clp.2.b
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				From = { ai = no }
			}
		}
	}
}

country_event = {	
	id = flavor_clp.3
	title = flavor_clp.3.t
	desc = flavor_clp.3.desc
	picture = CLOWNPIECE_eventPicture
	
	is_triggered_only = yes
	
	option = {	
		name = flavor_clp.3.a
		
		JNK = { 
			free_vassal = ROOT
			create_alliance = ROOT
			add_historical_friend = ROOT
		}
		add_historical_friend = JNK
		every_owned_province = {
			limit = {
				culture = Lunarian_culture
			}
			change_culture = Fairy
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {	
	id = flavor_clp.4
	title = flavor_clp.4.t
	desc = flavor_clp.4.desc
	picture = HECATIA2_eventPicture
	
	is_triggered_only = yes
	
	option = {	
		name = flavor_clp.4.a
		custom_tooltip = flavor_clp.4.a.tt
		
		inherit = HEC
		every_province = {
			limit = {
				is_core = HEC
			}
			remove_core = HEC
		}
		change_religion = Gensokyan
		set_ruler_religion = Gensokyan
		hidden_effect = {
			every_owned_province = {
				change_religion = ROOT
			}
			set_country_flag = clp_pledging_to_believe_hecatia
		}
		change_personal_deity = Hecatia
		every_owned_province = {
			limit = {
				culture = Lunarian_culture
			}
			change_culture = Fairy
		}
		
		ai_chance = { 
			factor = 0
		}
	}
	
	option = {	
		name = flavor_clp.4.b
		custom_tooltip = flavor_clp.4.b.tt		
		
		create_alliance = HEC
		add_trust = {
			who = HEC
			value = 25
			mutual = yes
		}	
		change_religion = Gensokyan
		set_ruler_religion = Gensokyan
		hidden_effect = {
			every_owned_province = {
				change_religion = ROOT
			}
		}
		HEC = { 
			add_historical_friend = ROOT
		}
		add_historical_friend = HEC
		add_country_modifier = {
			name = clp_support_to_common_goal
			duration = 7300
		}

		ai_chance = { 
			factor = 50
		}
	}
	
	option = {	
		name = flavor_clp.4.c
		custom_tooltip = flavor_clp.4.c.tt
		
		ai_chance = { 
			factor = 50
		}
	}
}	

country_event = {	
	id = flavor_clp.5
	title = flavor_clp.5.t
	desc = flavor_clp.5.desc
	picture = ANGERHECATIA_eventPicture
	
	trigger = {
		has_country_flag = clp_pledging_to_believe_hecatia
		NOT = { has_country_flag = clp_anger_of_hecatia }
		NOT = {
			AND = {
				religion = Gensokyan
				has_personal_deity = Hecatia
			}
		}
	}

	mean_time_to_happen = {
		months = 0
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = clp_anger_of_hecatia
			clr_country_flag = clp_pledging_to_believe_hecatia
		}
	}
	
	option = {	
		name = flavor_clp.5.a
		custom_tooltip = flavor_clp.5.a.tt
		
		add_country_modifier = {
			name = clp_anger_of_hecatia
			duration = -1
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {	
	id = flavor_clp.6
	title = flavor_clp.6.t
	desc = flavor_clp.6.desc
	picture = HECATIA2_eventPicture
	
	trigger = {
		has_country_flag = clp_anger_of_hecatia
		NOT = { has_country_flag = clp_pledging_to_believe_hecatia }
		AND = {
			religion = Gensokyan
			has_personal_deity = Hecatia
		}
	}
	
	mean_time_to_happen = {
		months = 0
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = clp_pledging_to_believe_hecatia
			clr_country_flag = clp_anger_of_hecatia
		}
	}
	
	option = {	
		name = flavor_clp.6.a
		
		remove_country_modifier = clp_anger_of_hecatia
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {	
	id = flavor_clp.7
	title = flavor_clp.7.t
	desc = flavor_clp.7.desc
	picture = JUNKOHECATIA_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			clr_country_flag = clp_pledging_to_believe_hecatia
			set_country_flag = clp_dominate_the_moon
		}
	}

	option = {	
		name = flavor_clp.7.a
		custom_tooltip = flavor_clp.7.a.tt
		
		add_country_modifier = {
			name = clp_bless_of_hecatia_and_junko
			duration = -1
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {	
	id = flavor_clp.8
	title = flavor_clp.8.t
	desc = flavor_clp.8.desc
	picture = NEWCONTINENT_eventPicture
	
    is_triggered_only = yes
	
	option = {	
		name = flavor_clp.8.a
		
		4637 = {
			add_base_tax = 3
			add_base_production = 3
			add_base_manpower = 3
			add_center_of_trade_level = 2
			move_capital_effect = yes
			change_culture = Fairy
			change_religion = ROOT
			change_province_name = "New Clownpiecia"
		}
		add_country_modifier = {
			name = clp_settlement_into_the_new_world
			duration = -1
		}
		ai_chance = { 
			factor = 0
		}
	}
	
	option = {	
		name = flavor_clp.8.b
		
		add_country_modifier = {
			name = clp_fairies_heading_for_the_new_world
			duration = -1
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {
	id = flavor_clp.9
	title = flavor_clp.9.t
	desc = flavor_clp.9.desc
	picture = JUNKO2_eventPicture
   
  	trigger = {
		has_country_flag = clp_liberate_earth_fairy
		has_country_flag = clp_dominate_the_moon
		NOT = { has_country_flag = clp_calling_of_junko }
		ROOT = {
			is_free_or_tributary_trigger = yes
		}
		JNK = {
			exists = yes
			is_free_or_tributary_trigger = yes
			capital_scope = {
				region = moon_region
			}
		}
	}
	
	mean_time_to_happen = {
		months = 60
	}

	immediate = {
		hidden_effect = {
			set_country_flag = clp_calling_of_junko
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
							has_ruler = "Clownpiece"
							dynasty = "of Clownsville"
				}
				th_getruler_diplomatic_skill = {
					SKILL_BONI = 300
				}
			}
			else = {
				th_getruler_diplomatic_skill = {
					SKILL_BONI = 0
				}
			}
			#Clownpieces base diplo fight skills
			set_variable = {
				which = th_junko_diplo_skills
				value = 1600
			}
			th_defineopponent_fighting_skill = {
				VARIABLE = th_junko_diplo_skills
			}
		}
	}

	option = {
		name = flavor_clp.9.a

		JNK = {
			vassalize = ROOT
		}
		
		ai_chance = { 
			factor = 0
		}
	}

	option = {
		name = flavor_clp.9.b

		highlight = yes
		custom_tooltip = flavor_clp.9.b.tt
		th_danmaku_diplo_fight_ruler_and_opponent = yes
		hidden_effect = {
			set_country_flag = CLP_diplo_fight_with_junko
		}
		
		ai_chance = { 
			factor = 0
		}
	}

	option = {
		name = flavor_clp.9.c

		remove_historical_friend = JNK
		JNK = { 
			remove_historical_friend = ROOT
		}		
		reverse_add_opinion = {
			who = JNK
			modifier = th_refuse_to_calling
		}
		moon_region = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
				owned_by = JNK
			}
			add_permanent_claim = ROOT
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {
	id = flavor_clp.91
	title = flavor_clp.91.t
	desc = flavor_clp.91.desc
	picture = CLOWNPIECE_eventPicture
	
	trigger = {
		has_country_flag = CLP_diplo_fight_with_junko
		has_country_flag = th_incident_last_diplo_fight_won
	}

	mean_time_to_happen = {
		days = 10
	}

	immediate = {
		clr_country_flag = CLP_diplo_fight_with_junko
	}
	
	option = {
		name = flavor_clp.91.a
		create_subject = {
			subject_type = personal_union
			subject = JNK
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {
	id = flavor_clp.92
	title = flavor_clp.92.t
	desc = flavor_clp.92.desc
	picture = JUNKO2_eventPicture
	
	trigger = {
		has_country_flag = CLP_diplo_fight_with_junko
		has_country_flag = th_incident_last_diplo_fight_lost
	}

	mean_time_to_happen = {
		days = 10
	}

	immediate = {
		clr_country_flag = CLP_diplo_fight_with_junko
	}
	
	option = {	
		name = flavor_clp.92.a

		add_prestige = -20
		remove_historical_friend = JNK
		JNK = { 
			remove_historical_friend = ROOT
		}		
		JNK = {
			vassalize = ROOT
		}
		
		ai_chance = { 
			factor = 0
		}
	}
	
	option = {
		name = flavor_clp.92.b

		add_prestige = -20
		remove_historical_friend = JNK
		JNK = { 
			remove_historical_friend = ROOT
		}
		add_historical_rival = JNK
		JNK = { 
			add_historical_rival = ROOT
		}
		reverse_add_opinion = {
			who = JNK
			modifier = th_refuse_to_calling
		}
		moon_region = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
				owned_by = JNK
			}
			add_permanent_claim = ROOT
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {
	id = flavor_clp.10
	title = flavor_clp.10.t
	desc = flavor_clp.10.desc
	picture = HECATIA2_eventPicture
   
  	trigger = {
		has_country_flag = clp_liberate_earth_fairy
		has_country_flag = clp_dominate_the_moon
		NOT = { has_country_flag = clp_calling_of_hecatia }
		ROOT = {
			is_free_or_tributary_trigger = yes
		}
		HEC = {
			exists = yes
			is_free_or_tributary_trigger = yes
			capital_scope = {
				region = moon_region
			}
		}
	}
	
	mean_time_to_happen = {
		months = 60
	}

	immediate = {
		hidden_effect = {
			set_country_flag = clp_calling_of_hecatia
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
							has_ruler = "Clownpiece"
							dynasty = "of Clownsville"
				}
				th_getruler_diplomatic_skill = {
					SKILL_BONI = 300
				}
			}
			else = {
				th_getruler_diplomatic_skill = {
					SKILL_BONI = 0
				}
			}
			#Clownpieces base diplo fight skills
			set_variable = {
				which = th_hecatia_diplo_skills
				value = 1600
			}
			th_defineopponent_fighting_skill = {
				VARIABLE = th_hecatia_diplo_skills
			}
		}
	}

	option = {
		name = flavor_clp.10.a

		HEC = {
			vassalize = ROOT
		}
		
		ai_chance = { 
			factor = 0
		}
	}

	option = {
		name = flavor_clp.10.b

		highlight = yes
		custom_tooltip = flavor_clp.10.b.tt
		th_danmaku_diplo_fight_ruler_and_opponent = yes
		hidden_effect = {
			set_country_flag = CLP_diplo_fight_with_hecatia
		}
		
		ai_chance = { 
			factor = 0
		}
	}

	option = {
		name = flavor_clp.10.c

		remove_historical_friend = HEC
		HEC = { 
			remove_historical_friend = ROOT
		}		
		reverse_add_opinion = {
			who = HEC
			modifier = th_refuse_to_calling
		}
		moon_region = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
				owned_by = HEC
			}
			add_permanent_claim = ROOT
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {
	id = flavor_clp.101
	title = flavor_clp.101.t
	desc = flavor_clp.101.desc
	picture = CLOWNPIECE_eventPicture
	
	trigger = {
		has_country_flag = CLP_diplo_fight_with_hecatia
		has_country_flag = th_incident_last_diplo_fight_won
	}

	mean_time_to_happen = {
		days = 10
	}

	immediate = {
		clr_country_flag = CLP_diplo_fight_with_hecatia
	}
	
	option = {
		name = flavor_clp.101.a
		create_subject = {
			subject_type = personal_union
			subject = HEC
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

country_event = {
	id = flavor_clp.102
	title = flavor_clp.102.t
	desc = flavor_clp.102.desc
	picture = HECATIA2_eventPicture
	
	trigger = {
		has_country_flag = CLP_diplo_fight_with_hecatia
		has_country_flag = th_incident_last_diplo_fight_lost
	}

	mean_time_to_happen = {
		days = 10
	}

	immediate = {
		clr_country_flag = CLP_diplo_fight_with_hecatia
	}
	
	option = {	
		name = flavor_clp.102.a

		add_prestige = -20
		remove_historical_friend = HEC
		HEC = { 
			remove_historical_friend = ROOT
		}		
		HEC = {
			vassalize = ROOT
		}
		
		ai_chance = { 
			factor = 0
		}
	}
	
	option = {
		name = flavor_clp.102.b

		add_prestige = -20
		remove_historical_friend = HEC
		HEC = { 
			remove_historical_friend = ROOT
		}
		add_historical_rival = HEC
		HEC = { 
			add_historical_rival = ROOT
		}
		reverse_add_opinion = {
			who = HEC
			modifier = th_refuse_to_calling
		}
		moon_region = {
			limit = {
				NOT = { is_permanent_claim = ROOT }
				NOT = { is_core = ROOT }
				owned_by = HEC
			}
			add_permanent_claim = ROOT
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}