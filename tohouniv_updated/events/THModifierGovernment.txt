namespace = th_modifier_government_events

#Set bonus
country_event = {
	id = th_modifier_government_events.1
	title = "th_modifier_government_events.1.t"
	desc = "th_modifier_government_events.1.desc"
	picture = SHRINE_eventPicture
	hidden = yes

	trigger = {
		OR = {
			has_government_mechanic = mamluk_mechanic
			has_government_mechanic = russian_mechanic
			has_government_mechanic = cossacks_mechanic
		}
		OR = {
			NOT = { has_country_flag = th_had_increased_government_power_event }
			had_country_flag = {
				flag = th_had_increased_government_power_event
				days = 364
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}


	immediate = {
		clr_country_flag = th_had_increased_government_power_event
		export_to_variable = {
			variable_name = th_additional_government_power
			value = modifier:government_power_constant
			who = ROOT
		}
		multiply_variable = {
			which = th_additional_government_power
			value = 100
		}
	}

	option = {
		name = "th_modifier_government_events.1.a"
		set_country_flag = th_had_increased_government_power_event
		if = {
			limit = {
				check_variable = {
					which = th_additional_government_power
					value = 0
				}
			}
			subtract_variable = {
				which = th_additional_government_power
				value = 1
			}
			while = {
				limit = {
					check_variable = {
						which = th_additional_government_power
						value = 0
					}
				}
				if = {
					limit = {
						has_government_mechanic = mamluk_mechanic
					}
					add_government_power = {
						government_mechanic = mamluk_mechanic
						which = ADM
						amount = 1
					}
					add_government_power = {
						government_mechanic = mamluk_mechanic
						which = DIP
						amount = 1
					}
					add_government_power = {
						government_mechanic = mamluk_mechanic
						which = MIL
						amount = 1
					}
				}
				if = {
					limit = {
						has_government_mechanic = russian_mechanic
					}
					add_government_power = {
						government_mechanic = russian_mechanic
						which = ADM
						amount = 1
					}
					add_government_power = {
						government_mechanic = russian_mechanic
						which = DIP
						amount = 1
					}
					add_government_power = {
						government_mechanic = russian_mechanic
						which = MIL
						amount = 1
					}
				}
				if = {
					limit = {
						has_government_mechanic = cossacks_mechanic
					}
					add_government_power = {
						government_mechanic = cossacks_mechanic
						which = ADM
						amount = 1
					}
					add_government_power = {
						government_mechanic = cossacks_mechanic
						which = DIP
						amount = 1
					}
					add_government_power = {
						government_mechanic = cossacks_mechanic
						which = MIL
						amount = 1
					}
				}
				subtract_variable = {
					which = th_additional_government_power
					value = 1
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					check_variable = {
						which = th_additional_government_power
						value = 0
					}
				}
			}
			change_variable = {
				which = th_additional_government_power
				value = 1
			}
			while = {
				limit = {
					NOT = {
						check_variable = {
							which = th_additional_government_power
							value = 0
						}
					}
				}
				if = {
					limit = {
						has_government_mechanic = mamluk_mechanic
					}
					add_government_power = {
						government_mechanic = mamluk_mechanic
						which = ADM
						amount = -1
					}
					add_government_power = {
						government_mechanic = mamluk_mechanic
						which = DIP
						amount = -1
					}
					add_government_power = {
						government_mechanic = mamluk_mechanic
						which = MIL
						amount = -1
					}
				}
				if = {
					limit = {
						has_government_mechanic = russian_mechanic
					}
					add_government_power = {
						government_mechanic = russian_mechanic
						which = ADM
						amount = -1
					}
					add_government_power = {
						government_mechanic = russian_mechanic
						which = DIP
						amount = -1
					}
					add_government_power = {
						government_mechanic = russian_mechanic
						which = MIL
						amount = -1
					}
				}
				if = {
					limit = {
						has_government_mechanic = cossacks_mechanic
					}
					add_government_power = {
						government_mechanic = cossacks_mechanic
						which = ADM
						amount = -1
					}
					add_government_power = {
						government_mechanic = cossacks_mechanic
						which = DIP
						amount = -1
					}
					add_government_power = {
						government_mechanic = cossacks_mechanic
						which = MIL
						amount = -1
					}
				}
				change_variable = {
					which = th_additional_government_power
					value = 1
				}
			}
		}
		

		ai_chance = {
			factor = 100
		}
	}
}
